// Compressed using https://javascript-minifier.com/

const filterCode = function () {
    return 'let packet,packetFiltersArray,source,work,cache,actions,workstore={},workstoreLastAccessed={};const createResultObject=function(e){return{r:new Uint8ClampedArray(e),g:new Uint8ClampedArray(e),b:new Uint8ClampedArray(e),a:new Uint8ClampedArray(e)}},unknit=function(e){let t=e.data,l=Math.floor(t.length/4);source=createResultObject(l),e.channels=source;let n=source.r,r=source.g,o=source.b,s=source.a,u=(work=createResultObject(l)).r,a=work.g,c=work.b,i=work.a,f=0;for(let e=0,l=t.length;e<l;e+=4)n[f]=t[e],r[f]=t[e+1],o[f]=t[e+2],s[f]=t[e+3],u[f]=t[e],a[f]=t[e+1],c[f]=t[e+2],i[f]=t[e+3],f++},knit=function(){let e=packet.image.data,t=work.r,l=work.g,n=work.b,r=work.a,o=0;for(let s=0,u=e.length;s<u;s+=4)e[s]=t[o],e[s+1]=l[o],e[s+2]=n[o],e[s+3]=r[o],o++};onmessage=function(e){packet=e.data,packetFiltersArray=packet.filters;let t=Object.keys(workstore),l=Date.now()-3e3;t.forEach(e=>{workstoreLastAccessed[e]<l&&(delete workstore[e],delete workstoreLastAccessed[e])}),actions=[],(cache={}).source=packet.image,packetFiltersArray.forEach(e=>actions.push(...e.actions)),actions.length&&(unknit(cache.source),actions.forEach(e=>theBigActionsObject[e.action]&&theBigActionsObject[e.action](e)),knit()),postMessage(packet)},onerror=function(e){console.log("error"+e.message),postMessage(packet)};const buildImageGrid=function(e){if(e||(e=cache.source),e&&e.width&&e.height){let t=`grid-${e.width}-${e.height}`;if(workstore[t])return workstoreLastAccessed[t]=Date.now(),workstore[t];let l=[],n=0;for(let t=0,r=e.height;t<r;t++){let t=[];for(let l=0,r=e.width;l<r;l++)t.push(n),n++;l.push(t)}return workstore[t]=l,workstoreLastAccessed[t]=Date.now(),l}return!1},buildAlphaTileSets=function(e,t,l,n,r,o,s,u){if(u||(u=cache.source),u&&u.width&&u.height){let s=u.width,a=u.height;(e=e.toFixed&&!isNaN(e)?e:1)<1&&(e=1),(t=t.toFixed&&!isNaN(t)?t:1)<1&&(t=1),e+(l=l.toFixed&&!isNaN(l)?l:1)>=s&&(e=s-l-1),t+(n=n.toFixed&&!isNaN(n)?n:1)>=a&&(t=a-n-1),e<1&&(e=1),t<1&&(t=1),e+l>=s&&(l=s-e-1),t+n>=a&&(n=a-t-1);let c=e+l,i=t+n;(r=r.toFixed&&!isNaN(r)?r:0)<0&&(r=0),r>=c&&(r=c-1),(o=o.toFixed&&!isNaN(o)?o:0)<0&&(o=0),o>=i&&(o=i-1);let f=`alphatileset-${s}-${a}-${e}-${t}-${l}-${n}-${r}-${o}`;if(workstore[f])return workstoreLastAccessed[f]=Date.now(),workstore[f];let h,g,p,d,b,k,w,R=[];for(d=o-i,b=a;d<b;d+=i)for(g=r-c,p=s;g<p;g+=c){for(h=[],k=d,w=d+t;k<w;k++)if(k>=0&&k<a)for(let t=g,l=g+e;t<l;t++)t>=0&&t<s&&h.push(k*s+t);for(R.push([].concat(h)),h=[],k=d+t,w=d+t+n;k<w;k++)if(k>=0&&k<a)for(let t=g,l=g+e;t<l;t++)t>=0&&t<s&&h.push(k*s+t);for(R.push([].concat(h)),h=[],k=d,w=d+t;k<w;k++)if(k>=0&&k<a)for(let t=g+e,n=g+e+l;t<n;t++)t>=0&&t<s&&h.push(k*s+t);for(R.push([].concat(h)),h=[],k=d+t,w=d+t+n;k<w;k++)if(k>=0&&k<a)for(let t=g+e,n=g+e+l;t<n;t++)t>=0&&t<s&&h.push(k*s+t);R.push([].concat(h))}return workstore[f]=R,workstoreLastAccessed[f]=Date.now(),R}return!1},buildImageTileSets=function(e,t,l,n,r){if(r||(r=cache.source),r&&r.width&&r.height){let o=r.width,s=r.height;(e=e.toFixed&&!isNaN(e)?e:1)<1&&(e=1),e>=o&&(e=o-1),(t=t.toFixed&&!isNaN(t)?t:1)<1&&(t=1),t>=s&&(t=s-1),(l=l.toFixed&&!isNaN(l)?l:0)<0&&(l=0),l>=e&&(l=e-1),(n=n.toFixed&&!isNaN(n)?n:0)<0&&(n=0),n>=t&&(n=t-1);let u=`imagetileset-${o}-${s}-${e}-${t}-${l}-${n}`;if(workstore[u])return workstoreLastAccessed[u]=Date.now(),workstore[u];let a=[];for(let r=n-t,u=s;r<u;r+=t)for(let n=l-e,u=o;n<u;n+=e){let l=[];for(y=r,yz=r+t;y<yz;y++)if(y>=0&&y<s)for(let t=n,r=n+e;t<r;t++)t>=0&&t<o&&l.push(y*o+t);l.length&&a.push(l)}return workstore[u]=a,workstoreLastAccessed[u]=Date.now(),a}return!1},buildHorizontalBlur=function(e,t,l){t&&t.toFixed&&!isNaN(t)||(t=0);let n=e.length,r=e[0].length,o=`blur-h-${r}-${n}-${t}`;if(workstore[o])return workstoreLastAccessed[o]=Date.now(),workstore[o];let s=[];for(let l=0;l<n;l++)for(let o=0;o<r;o++){let u=[];for(let n=o-t,s=o+t+1;n<s;n++)n>=0&&n<r&&u.push(e[l][n]);s[l*n+o]=u}return workstore[o]=s,workstoreLastAccessed[o]=Date.now(),s},buildVerticalBlur=function(e,t,l){t&&t.toFixed&&!isNaN(t)||(t=0);let n=e.length,r=e[0].length,o=`blur-v-${r}-${n}-${t}`;if(workstore[o])return workstoreLastAccessed[o]=Date.now(),workstore[o];let s=[];for(let l=0;l<r;l++)for(let r=0;r<n;r++){let o=[];for(let s=r-t,u=r+t+1;s<u;s++)s>=0&&s<n&&o.push(e[s][l]);s[r*n+l]=o}return workstore[o]=s,workstoreLastAccessed[o]=Date.now(),s},buildMatrixGrid=function(e,t,l,n,r,o){o||(o=cache.source),(null==e||e<1)&&(e=1),(null==t||t<1)&&(t=1),null==l||l<0?l=0:l>=e&&(l=e-1),null==n||n<0?n=0:n>=t&&(n=t-1);let s=o.width,u=o.height,a=`matrix-${s}-${u}-${e}-${t}-${l}-${n}`;if(workstore[a])return workstoreLastAccessed[a]=Date.now(),workstore[a];let c,i,f,h,g,p,d=o.data.length,b=[],k=[];for(f=-n,h=t-n;f<h;f++)for(c=-l,i=e-l;c<i;c++)b.push(f*s+c);for(f=0;f<u;f++)for(c=0;c<s;c++){let e=f*s+c,t=[];for(g=0,p=b.length;g<p;g++){let l=e+b[g];l<0?l+=d:l>=d&&(l-=d),t.push(l)}k.push(t)}return workstore[a]=k,workstoreLastAccessed[a]=Date.now(),k},checkChannelLevelsParameters=function(e){const t=function(e,t=!1){if(e.toFixed)return e<0?[[0,255,0]]:e>255?[[0,255,255]]:isNaN(e)?t?[[0,255,255]]:[[0,255,0]]:[[0,255,e]];if(e.substring&&(e=e.split(",")),Array.isArray(e)){if(!e.length)return e;if(Array.isArray(e[0]))return e;if((e=e.map(e=>parseInt(e,10))).sort((e,t)=>e-t),1==e.length)return[[0,255,e[0]]];let t,l,n=[];for(let r=0,o=e.length;r<o;r++)t=0,l=255,0!=r&&(t=Math.ceil(e[r-1]+(e[r]-e[r-1])/2)),r!=o-1&&(l=Math.floor(e[r]+(e[r+1]-e[r])/2)),n.push([t,l,e[r]]);return n}return t?[[0,255,255]]:[[0,255,0]]};e.red=t(e.red),e.green=t(e.green),e.blue=t(e.blue),e.alpha=t(e.alpha,!0)},cacheOutput=function(e,t,l){cache[e]=t},copyOver=function(e,t){let{r:l,g:n,b:r,a:o}=e,{r:s,g:u,b:a,a:c}=t;for(let e=0;e<l.length;e++)s[e]=l[e],u[e]=n[e],a[e]=r[e],c[e]=o[e]},getInputAndOutputDimensions=function(e){let t=cache.source,l=[];return e.lineIn&&"source"!=e.lineIn&&"source-alpha"!=e.lineIn&&cache[e.lineIn]&&(t=cache[e.lineIn]),l.push(t.width,t.height),e.lineOut&&cache[e.lineOut]&&(t=cache[e.lineOut]),l.push(t.width,t.height),t=cache.source,e.lineMix&&"source"!=e.lineMix&&"source-alpha"!=e.lineMix&&cache[e.lineMix]&&(t=cache[e.lineMix]),l.push(t.width,t.height),l},getInputAndOutputChannels=function(e){let t=work,l=t.r.length,n=cache.source;if(e.lineIn)if("source"==e.lineIn)t=n.channels;else if("source-alpha"==e.lineIn){let e=(t=createResultObject(l)).a,r=n.channels.a;for(let t=0;t<l;t++)e[t]=r[t]}else cache[e.lineIn]&&(t=(n=cache[e.lineIn]).channels);let r,o=!1;if(e.lineMix)if("source"==e.lineMix)o=cache.source.channels;else if("source-alpha"==e.lineMix){let e=(o=createResultObject(l)).a,t=cache.source.channels.a;for(let n=0;n<l;n++)e[n]=t[n]}else cache[e.lineMix]&&(o=cache[e.lineMix].channels);return e.lineOut?cache[e.lineOut]?r=cache[e.lineOut].channels:(r=createResultObject(l),cache[e.lineOut]={width:n.width,height:n.height,channels:r}):r=createResultObject(l),[t,r,o]},processResults=function(e,t,l){let n=e.r,r=e.g,o=e.b,s=e.a,u=t.r,a=t.g,c=t.b,i=t.a;if(1===l)copyOver(t,e);else if(l>0){antiRatio=1-l;for(let e=0,t=n.length;e<t;e++)n[e]=Math.floor(n[e]*antiRatio+u[e]*l),r[e]=Math.floor(r[e]*antiRatio+a[e]*l),o[e]=Math.floor(o[e]*antiRatio+c[e]*l),s[e]=Math.floor(s[e]*antiRatio+i[e]*l)}},getHSLfromRGB=function(e,t,l){let n=Math.min(e,t,l),r=Math.max(e,t,l),o=(n+r)/2,s=0;n!==r&&(s=o<=.5?(r-n)/(r+n):(r-n)/(2-r-n));let u=0;return u=r===e?(t-l)/(r-n):r===t?2+(l-e)/(r-n):4+(e-t)/(r-n),(u*=60)<0&&(u+=360),[u,s,o]},getRGBfromHSL=function(e,t,l){if(!t){let e=Math.floor(255*l);return[e,e,e]}let n=l<.5?l*(t+1):l+t-l*t,r=2*l-n;const o=function(e,t,l){return 6*e<1?l+6*(t-l)*e:2*e<1?t:2*e<2?l+6*(t-l)*(.666*e):l};let s=(e/=360)+.333,u=e,a=e-.333;return s<0&&(s+=1),s>1&&(s-=1),u<0&&(u+=1),u>1&&(u-=1),a<0&&(a+=1),a>1&&(a-=1),[255*o(s,n,r),255*o(u,n,r),255*o(a,n,r)]},theBigActionsObject={"alpha-to-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,excludeRed:a,excludeGreen:c,excludeBlue:i,lineOut:f}=e;null==r&&(r=1),null==o&&(o=!0),null==s&&(s=!0),null==u&&(u=!0),null==a&&(a=!0),null==c&&(c=!0),null==i&&(i=!0);const{r:h,g:g,b:p,a:d}=t,{r:b,g:k,b:w,a:R}=l;for(let e=0;e<n;e++)b[e]=o?d[e]:a?0:h[e],k[e]=s?d[e]:c?0:g[e],w[e]=u?d[e]:i?0:p[e];R.fill(255,0,R.length-1),f?processResults(l,work,1-r):processResults(work,l,r)},"area-alpha":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,tileWidth:o,tileHeight:s,offsetX:u,offsetY:a,gutterWidth:c,gutterHeight:i,areaAlphaLevels:f,lineOut:h}=e;null==r&&(r=1),null==o&&(o=1),null==s&&(s=1),null==u&&(u=0),null==a&&(a=0),null==c&&(c=1),null==i&&(i=1),null==f&&(f=[255,0,0,0]);let g=buildAlphaTileSets(o,s,c,i,u,a);Array.isArray(f)||(f=[255,0,0,0]);const{r:p,g:d,b:b,a:k}=t,{r:w,g:R,b:O,a:A}=l;for(let e=0;e<n;e++)w[e]=p[e],R[e]=d[e],O[e]=b[e];g.forEach((e,t)=>{for(let l=0,n=e.length;l<n;l++)k[e[l]]&&(A[e[l]]=f[t%4])}),h?processResults(l,work,1-r):processResults(work,l,r)},"average-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,excludeRed:a,excludeGreen:c,excludeBlue:i,lineOut:f}=e;null==r&&(r=1),null==o&&(o=!0),null==s&&(s=!0),null==u&&(u=!0),null==a&&(a=!1),null==c&&(c=!1),null==i&&(i=!1);let h=0;o&&h++,s&&h++,u&&h++;const{r:g,g:p,b:d,a:b}=t,{r:k,g:w,b:R,a:O}=l;for(let e=0;e<n;e++)if(b[e])if(h){let t=0;o&&(t+=g[e]),s&&(t+=p[e]),u&&(t+=d[e]),t=Math.floor(t/h),k[e]=a?0:t,w[e]=c?0:t,R[e]=i?0:t,O[e]=b[e]}else k[e]=a?0:g[e],w[e]=c?0:p[e],R[e]=i?0:d[e],O[e]=b[e];else k[e]=g[e],w[e]=p[e],R[e]=d[e],O[e]=b[e];f?processResults(l,work,1-r):processResults(work,l,r)},binary:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,red:o,green:s,blue:u,alpha:a,lineOut:c}=e;null==r&&(r=1),null==o&&(o=0),null==s&&(s=0),null==u&&(u=0),null==a&&(a=0);const{r:i,g:f,b:h,a:g}=t,{r:p,g:d,b:b,a:k}=l;for(let e=0;e<n;e++)p[e]=o?i[e]>o?255:0:i[e],d[e]=s?f[e]>s?255:0:f[e],b[e]=u?h[e]>u?255:0:h[e],k[e]=a?g[e]>a?255:0:g[e];c?processResults(l,work,1-r):processResults(work,l,r)},blend:function(e){let[t,l,n]=getInputAndOutputChannels(e),{opacity:r,blend:o,offsetX:s,offsetY:u,lineOut:a}=(l.r.length,e);null==r&&(r=1),null==o&&(o=""),null==s&&(s=0),null==u&&(u=0);const{r:c,g:i,b:f,a:h}=t,{r:g,g:p,b:d,a:b}=l,{r:k,g:w,b:R,a:O}=n;let[A,y,I,m,M,x]=getInputAndOutputDimensions(e);const B=function(e,t,l){g[t]=l.r[e],p[t]=l.g[e],d[t]=l.b[e],b[t]=l.a[e]},G=function(e,t){let l=e-s,n=t-u,r=-1;return l>=0&&l<M&&n>=0&&n<x&&(r=n*M+l),[t*A+e,r]},C=function(e,l){return[t.r[e]/255,t.g[e]/255,t.b[e]/255,t.a[e]/255,n.r[l]/255,n.g[l]/255,n.b[l]/255,n.a[l]/255]},L=(e,t)=>255*(e+t*(1-e));switch(o){case"color-burn":const e=(e,t)=>1==t?255:0==e?0:255*(1-Math.min(1,(1-t)/e));for(let l=0;l<y;l++)for(let r=0;r<A;r++){let[o,s]=G(r,l);if(s<0)B(o,o,t);else if(h[o])if(O[s]){let[t,l,n,r,u,a,c,i]=C(o,s);g[o]=e(t,u),p[o]=e(l,a),d[o]=e(n,c),b[o]=L(r,i)}else B(o,o,t);else B(s,o,n)}break;case"color-dodge":const l=(e,t)=>0==t?0:1==e?255:255*Math.min(1,t/(1-e));for(let e=0;e<y;e++)for(let r=0;r<A;r++){let[o,s]=G(r,e);if(s<0)B(o,o,t);else if(h[o])if(O[s]){let[e,t,n,r,u,a,c,i]=C(o,s);g[o]=l(e,u),p[o]=l(t,a),d[o]=l(n,c),b[o]=L(r,i)}else B(o,o,t);else B(s,o,n)}break;case"darken":const r=(e,t)=>e<t?e:t;for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[o,s]=G(l,e);s<0?B(o,o,t):h[o]?O[s]?(g[o]=r(c[o],k[s]),p[o]=r(i[o],w[s]),d[o]=r(f[o],R[s]),b[o]=L(h[o]/255,O[s]/255)):B(o,o,t):B(s,o,n)}break;case"difference":const s=(e,t)=>255*Math.abs(e-t);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,u,a,c,i]=C(r,o);g[r]=s(e,u),p[r]=s(t,a),d[r]=s(l,c),b[r]=L(n,i)}else B(o,r,n)}break;case"exclusion":const u=(e,t)=>255*(e+t-2*t*e);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,s,a,c,i]=C(r,o);g[r]=u(e,s),p[r]=u(t,a),d[r]=u(l,c),b[r]=L(n,i)}else B(o,r,n)}break;case"hard-light":const a=(e,t)=>e<=.5?e*t*255:255*(t+(e-t*e));for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,s,u,c,i]=C(r,o);g[r]=a(e,s),p[r]=a(t,u),d[r]=a(l,c),b[r]=L(n,i)}else B(o,r,n)}break;case"lighten":const I=(e,t)=>e>t?e:t;for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);o<0?B(r,r,t):h[r]?(g[r]=I(c[r],k[o]),p[r]=I(i[r],w[o]),d[r]=I(f[r],R[o]),b[r]=L(h[r]/255,O[o]/255)):B(o,r,n)}break;case"lighter":const m=(e,t)=>255*(e+t);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,s,u,a,c]=C(r,o);g[r]=m(e,s),p[r]=m(t,u),d[r]=m(l,a),b[r]=L(n,c)}else B(o,r,n)}break;case"multiply":const M=(e,t)=>e*t*255;for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o);g[r]=M(e,s),p[r]=M(t,u),d[r]=M(l,a),b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;case"overlay":const x=(e,t)=>e>=.5?e*t*255:255*(t+(e-t*e));for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,s,u,a,c]=C(r,o);g[r]=x(e,s),p[r]=x(t,u),d[r]=x(l,a),b[r]=L(n,c)}else B(o,r,n)}break;case"screen":const $=(e,t)=>255*(t+(e-t*e));for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let[e,t,l,n,s,u,a,c]=C(r,o);g[r]=$(e,s),p[r]=$(t,u),d[r]=$(l,a),b[r]=L(n,c)}else B(o,r,n)}break;case"soft-light":const N=(e,t)=>{let l=t<=.25?((16*t-12)*t+4)*t:Math.sqrt(t);return e<=.5?255*(t-(1-2*e)*t*(1-t)):255*(t+(2*e-1)*(l-t))};for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o);g[r]=N(e,s),p[r]=N(t,u),d[r]=N(l,a),b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;case"color":const v=(e,t,l,n,r,o)=>{let[s,u,a]=getHSLfromRGB(e,t,l),[c,i,f]=getHSLfromRGB(n,r,o);return getRGBfromHSL(s,u,f)};for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o),[i,f,h]=v(e,t,l,s,u,a);g[r]=i,p[r]=f,d[r]=h,b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;case"hue":const H=(e,t,l,n,r,o)=>{let[s,u,a]=getHSLfromRGB(e,t,l),[c,i,f]=getHSLfromRGB(n,r,o);return getRGBfromHSL(s,i,f)};for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o),[i,f,h]=H(e,t,l,s,u,a);g[r]=i,p[r]=f,d[r]=h,b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;case"luminosity":const D=(e,t,l,n,r,o)=>{let[s,u,a]=getHSLfromRGB(e,t,l),[c,i,f]=getHSLfromRGB(n,r,o);return getRGBfromHSL(c,i,a)};for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o),[i,f,h]=D(e,t,l,s,u,a);g[r]=i,p[r]=f,d[r]=h,b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;case"saturation":const S=(e,t,l,n,r,o)=>{let[s,u,a]=getHSLfromRGB(e,t,l),[c,i,f]=getHSLfromRGB(n,r,o);return getRGBfromHSL(c,u,f)};for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r])if(O[o]){let[e,t,l,n,s,u,a,c]=C(r,o),[i,f,h]=S(e,t,l,s,u,a);g[r]=i,p[r]=f,d[r]=h,b[r]=L(n,c)}else B(r,r,t);else B(o,r,n)}break;default:const F=(e,t,l,n)=>t*e+n*l*(1-t);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[r,o]=G(l,e);if(o<0)B(r,r,t);else if(h[r]){let e=h[r]/255,t=O[o]/255;g[r]=F(c[r],e,k[o],t),p[r]=F(i[r],e,w[o],t),d[r]=F(f[r],e,R[o],t),b[r]=L(e,t)}else B(o,r,n)}}a?processResults(l,work,1-r):processResults(work,l,r)},blur:function(e){let t,l,[n,r]=getInputAndOutputChannels(e),o=n.r.length,{opacity:s,radius:u,passes:a,processVertical:c,processHorizontal:i,includeRed:f,includeGreen:h,includeBlue:g,includeAlpha:p,step:d,lineOut:b}=e;if(null==s&&(s=1),null==u&&(u=0),null==a&&(a=1),null==c&&(c=!0),null==i&&(i=!0),null==f&&(f=!0),null==h&&(h=!0),null==g&&(g=!0),null==p&&(p=!1),null==d&&(d=1),i||c){let e=buildImageGrid();i&&(t=buildHorizontalBlur(e,u,n.a)),c&&(l=buildVerticalBlur(e,u,n.a))}const{r:k,g:w,b:R,a:O}=n,{r:A,g:y,b:I,a:m}=r,M=function(e,t,l,n,r){if(e){let e=t[l],o=e.length,s=0,u=0;if(r){for(let t=0;t<o;t+=d)r[e[t]]&&(u+=n[e[t]],s++);return u/s}for(let t=0;t<o;t++)u+=n[e[t]];return u/o}return n[l]};if(a&&(i||c)){const e=createResultObject(o),{r:s,g:u,b:d,a:b}=e;copyOver(n,e);for(let n=0;n<a;n++){if(i){for(let e=0;e<o;e++)(p||b[e])&&(A[e]=M(f,t,e,s,b),y[e]=M(h,t,e,u,b),I[e]=M(g,t,e,d,b),m[e]=M(p,t,e,b,!1));(c||n<a-1)&&copyOver(r,e)}if(c){for(let e=0;e<o;e++)(p||b[e])&&(A[e]=M(f,l,e,s,b),y[e]=M(h,l,e,u,b),I[e]=M(g,l,e,d,b),m[e]=M(p,l,e,b,!1));n<a-1&&copyOver(r,e)}}}else copyOver(n,r);b?processResults(r,work,1-s):processResults(work,r,s)},"channels-to-alpha":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,lineOut:a}=e;null==r&&(r=1),null==o&&(o=!0),null==s&&(s=!0),null==u&&(u=!0);let c=0;o&&c++,s&&c++,u&&c++;const{r:i,g:f,b:h,a:g}=t,{r:p,g:d,b:b,a:k}=l;for(let e=0;e<n;e++)if(p[e]=i[e],d[e]=f[e],b[e]=h[e],c){let t=0;o&&(t+=i[e]),s&&(t+=f[e]),u&&(t+=h[e]),t=Math.floor(t/c),k[e]=t}else k[e]=g[e];a?processResults(l,work,1-r):processResults(work,l,r)},chroma:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,ranges:o,lineOut:s}=e;null==r&&(r=1),null==o&&(o=[]);const{r:u,g:a,b:c,a:f}=t,{r:h,g:g,b:p,a:d}=l;for(let e=0;e<n;e++){let t=!1,l=u[e],n=a[e],r=c[e];for(i=0,iz=o.length;i<iz;i++){o[i];let[e,s,u,a,c,f]=o[i];if(l>=e&&l<=a&&n>=s&&n<=c&&r>=u&&r<=f){t=!0;break}}h[e]=u[e],g[e]=a[e],p[e]=c[e],d[e]=t?0:f[e]}s?processResults(l,work,1-r):processResults(work,l,r)},"clamp-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,lowRed:o,lowGreen:s,lowBlue:u,highRed:a,highGreen:c,highBlue:i,lineOut:f}=e;null==r&&(r=1),null==o&&(o=0),null==s&&(s=0),null==u&&(u=0),null==a&&(a=255),null==c&&(c=255),null==i&&(i=255);const h=a-o,g=c-s,p=i-u,{r:d,g:b,b:k,a:w}=t,{r:R,g:O,b:A,a:y}=l;for(let e=0;e<n;e++)if(w[e]){let t=d[e]/255,l=b[e]/255,n=k[e]/255;R[e]=o+t*h,O[e]=s+l*g,A[e]=u+n*p,y[e]=w[e]}else R[e]=d[e],O[e]=b[e],A[e]=k[e],y[e]=w[e];f?processResults(l,work,1-r):processResults(work,l,r)},"colors-to-alpha":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,red:o,green:s,blue:u,opaqueAt:a,transparentAt:c,lineOut:i}=e;null==r&&(r=1),null==o&&(o=0),null==s&&(s=255),null==u&&(u=0),null==a&&(a=1),null==c&&(c=0);const f=Math.max((o+s+u)/3,(255-o+(255-s)+(255-u))/3),h=c*f,g=a*f,p=g-h,d=function(e,t,l){let n=(Math.abs(o-e)+Math.abs(s-t)+Math.abs(u-l))/3;return n<h?0:n>g?255:(n-h)/p*255},{r:b,g:k,b:w,a:R}=t,{r:O,g:A,b:y,a:I}=l;for(let e=0;e<n;e++)O[e]=b[e],A[e]=k[e],y[e]=w[e],I[e]=d(b[e],k[e],w[e]);i?processResults(l,work,1-r):processResults(work,l,r)},compose:function(e){let[t,l,n]=getInputAndOutputChannels(e),{opacity:r,compose:o,offsetX:s,offsetY:u,lineOut:a}=(l.r.length,e);null==r&&(r=1),null==o&&(o=""),null==s&&(s=0),null==u&&(u=0);const{r:c,g:i,b:f,a:h}=t,{r:g,g:p,b:d,a:b}=l,{r:k,g:w,b:R,a:O}=n;let[A,y,I,m,M,x]=getInputAndOutputDimensions(e);const B=function(e,t,l){g[t]=l.r[e],p[t]=l.g[e],d[t]=l.b[e],b[t]=l.a[e]},G=function(e,t){let l=e-s,n=t-u,r=-1;return l>=0&&l<M&&n>=0&&n<x&&(r=n*M+l),[t*A+e,r]};switch(o){case"source-only":copyOver(t,l);break;case"source-atop":const e=(e,t,l,n)=>t*e*n+n*l*(1-t);for(let t=0;t<y;t++)for(let l=0;l<A;l++){let[n,r]=G(l,t);if(r>=0){let t=h[n]/255,l=O[r]/255;g[n]=e(c[n],t,k[r],l),p[n]=e(i[n],t,w[r],l),d[n]=e(f[n],t,R[r],l),b[n]=255*(t*l+l*(1-t))}}break;case"source-in":const r=(e,t,l)=>t*e*l;for(let e=0;e<y;e++)for(let t=0;t<A;t++){let[l,n]=G(t,e);if(n>=0){let e=h[l]/255,t=O[n]/255;g[l]=r(c[l],e,t),p[l]=r(i[l],e,t),d[l]=r(f[l],e,t),b[l]=e*t*255}}break;case"source-out":const s=(e,t,l)=>t*e*(1-l);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[n,r]=G(l,e);if(r<0)B(n,n,t);else{let e=h[n]/255,t=O[r]/255;g[n]=s(c[n],e,t),p[n]=s(i[n],e,t),d[n]=s(f[n],e,t),b[n]=e*(1-t)*255}}break;case"destination-only":for(let e=0;e<y;e++)for(let t=0;t<A;t++){let[l,r]=G(t,e);r>=0&&B(r,l,n)}break;case"destination-atop":const u=(e,t,l,n)=>t*e*(1-n)+n*l*t;for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[n,r]=G(l,e);if(r<0)B(n,n,t);else{let e=h[n]/255,t=O[r]/255;g[n]=u(c[n],e,k[r],t),p[n]=u(i[n],e,w[r],t),d[n]=u(f[n],e,R[r],t),b[n]=255*(e*(1-t)+t*e)}}break;case"destination-over":const a=(e,t,l,n)=>t*e*(1-n)+n*l;for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[n,r]=G(l,e);if(r<0)B(n,n,t);else{let e=h[n]/255,t=O[r]/255;g[n]=a(c[n],e,k[r],t),p[n]=a(i[n],e,w[r],t),d[n]=a(f[n],e,R[r],t),b[n]=255*(e*(1-t)+t)}}break;case"destination-in":const I=(e,t,l)=>t*e*l;for(let e=0;e<y;e++)for(let t=0;t<A;t++){let[l,n]=G(t,e);if(n>=0){let e=h[l]/255,t=O[n]/255;g[l]=I(k[n],t,e),p[l]=I(w[n],t,e),d[l]=I(R[n],t,e),b[l]=e*t*255}}break;case"destination-out":const m=(e,t,l)=>l*e*(1-t);for(let e=0;e<y;e++)for(let t=0;t<A;t++){let[l,n]=G(t,e);if(n>=0){let e=h[l]/255,t=O[n]/255;g[l]=m(k[n],e,t),p[l]=m(w[n],e,t),d[l]=m(R[n],e,t),b[l]=t*(1-e)*255}}break;case"clear":break;case"xor":const M=(e,t,l,n)=>t*e*(1-n)+n*l*(1-t);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[n,r]=G(l,e);if(r<0)B(n,n,t);else{let e=h[n]/255,t=O[r]/255;g[n]=M(c[n],e,k[r],t),p[n]=M(i[n],e,w[r],t),d[n]=M(f[n],e,R[r],t),b[n]=255*(e*(1-t)+t*(1-e))}}break;default:const x=(e,t,l,n)=>t*e+n*l*(1-t);for(let e=0;e<y;e++)for(let l=0;l<A;l++){let[n,r]=G(l,e);if(r<0)B(n,n,t);else{let e=h[n]/255,t=O[r]/255;g[n]=x(c[n],e,k[r],t),p[n]=x(i[n],e,w[r],t),d[n]=x(f[n],e,R[r],t),b[n]=255*(e+t*(1-e))}}}a?processResults(l,work,1-r):processResults(work,l,r)},displace:function(e){let[t,l,n]=getInputAndOutputChannels(e),{opacity:r,channelX:o,channelY:s,scaleX:u,scaleY:a,offsetX:c,offsetY:i,transparentEdges:f,lineOut:h}=(t.r.length,e);null==r&&(r=1),null==o&&(o="red"),null==s&&(s="green"),null==u&&(u=1),null==a&&(a=1),null==c&&(c=0),null==i&&(i=0),null==f&&(f=!1);const{r:g,g:p,b:d,a:b}=t,{r:k,g:w,b:R,a:O}=l,{r:A,g:y,b:I,a:m}=n;o="red"==o?A:"green"==o?y:"blue"==o?I:m,s="red"==s?A:"green"==s?y:"blue"==s?I:m;let[M,x,B,G,C,L]=getInputAndOutputDimensions(e);const $=function(e,t,l){e<0?O[t]=0:(k[t]=l.r[e],w[t]=l.g[e],R[t]=l.b[e],O[t]=l.a[e])},N=function(e,t){let l=e+c,n=t+i,r=-1;return l>=0&&l<C&&n>=0&&n<L&&(r=n*C+l),[t*M+e,r]};for(let e=0;e<x;e++)for(let l=0;l<M;l++){let[n,r]=N(l,e);if(r>=0){let c,i=Math.floor(l+(127-o[r])/127*u),h=Math.floor(e+(127-s[r])/127*a);f?c=i<0||i>=M||h<0||h>=x?-1:h*M+i:(i<0&&(i=0),i>=M&&(i=M-1),h<0&&(h=0),h>=x&&(h=x-1),c=h*M+i),$(c,n,t)}else $(n,n,t)}h?processResults(l,work,1-r):processResults(work,l,r)},emboss:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,strength:o,angle:s,tolerance:u,keepOnlyChangedAreas:a,postProcessResults:c,lineOut:i}=e;for(null==r&&(r=1),null==o&&(o=1),null==s&&(s=0),null==u&&(u=0),null==a&&(a=!1),null==c&&(c=!1),o=Math.abs(o);s<0;)s+=360;s%=360;let f=Math.floor(s/45),h=s%45/45*o,g=new Array(9);(g=g.fill(0,0,9))[4]=1,0==f?(g[5]=o-h,g[8]=h,g[3]=-g[5],g[0]=-g[8]):1==f?(g[8]=o-h,g[7]=h,g[0]=-g[8],g[1]=-g[7]):2==f?(g[7]=o-h,g[6]=h,g[1]=-g[7],g[2]=-g[6]):3==f?(g[6]=o-h,g[3]=h,g[2]=-g[6],g[5]=-g[3]):4==f?(g[3]=o-h,g[0]=h,g[5]=-g[3],g[8]=-g[0]):5==f?(g[0]=o-h,g[1]=h,g[8]=-g[0],g[7]=-g[1]):6==f?(g[1]=o-h,g[2]=h,g[7]=-g[1],g[6]=-g[2]):(g[2]=o-h,g[5]=h,g[6]=-g[2],g[3]=-g[5]);const{r:p,g:d,b:b,a:k}=t,{r:w,g:R,b:O,a:A}=l;grid=buildMatrixGrid(3,3,1,1);const y=function(e,t){let l=0;for(let n=0,r=t.length;n<r;n++)g[n]&&(l+=e[t[n]]*g[n]);return l};for(let e=0;e<n;e++)k[e]&&(w[e]=y(p,grid[e]),R[e]=y(d,grid[e]),O[e]=y(b,grid[e]),A[e]=k[e],c&&w[e]>=p[e]-u&&w[e]<=p[e]+u&&R[e]>=d[e]-u&&R[e]<=d[e]+u&&O[e]>=b[e]-u&&O[e]<=b[e]+u&&(a?A[e]=0:(w[e]=127,R[e]=127,O[e]=127)));i?processResults(l,work,1-r):processResults(work,l,r)},flood:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,red:o,green:s,blue:u,alpha:a,lineOut:c}=(Math.floor,e);null==r&&(r=1),null==o&&(o=0),null==s&&(s=0),null==u&&(u=0),null==a&&(a=255);const{r:i,g:f,b:h,a:g}=l;i.fill(o,0,n-1),f.fill(s,0,n-1),h.fill(u,0,n-1),g.fill(a,0,n-1),c?processResults(l,work,1-r):processResults(work,l,r)},grayscale:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,lineOut:o}=e;null==r&&(r=1);const{r:s,g:u,b:a,a:c}=t,{r:i,g:f,b:h,a:g}=l;for(let e=0;e<n;e++){let t=Math.floor(.2126*s[e]+.7152*u[e]+.0722*a[e]);i[e]=t,f[e]=t,h[e]=t,g[e]=c[e]}o?processResults(l,work,1-r):processResults(work,l,r)},"invert-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,includeAlpha:a,lineOut:c}=e;null==r&&(r=1),null==o&&(o=!0),null==s&&(s=!0),null==u&&(u=!0),null==a&&(a=!1);const{r:i,g:f,b:h,a:g}=t,{r:p,g:d,b:b,a:k}=l;for(let e=0;e<n;e++)p[e]=o?255-i[e]:i[e],d[e]=s?255-f[e]:f[e],b[e]=u?255-h[e]:h[e],k[e]=a?255-g[e]:g[e];c?processResults(l,work,1-r):processResults(work,l,r)},"lock-channels-to-levels":function(e){checkChannelLevelsParameters(e);const t=function(e,t){if(!t.length)return e;for(let l=0,n=t.length;l<n;l++){let[n,r,o]=t[l];if(e>=n&&e<=r)return o}};let[l,n]=getInputAndOutputChannels(e),r=l.r.length,{opacity:o,red:s,green:u,blue:a,alpha:c,lineOut:i}=e;null==o&&(o=1),null==s&&(s=[0]),null==u&&(u=[0]),null==a&&(a=[0]),null==c&&(c=[255]);const{r:f,g:h,b:g,a:p}=l,{r:d,g:b,b:k,a:w}=n;for(let e=0;e<r;e++)d[e]=t(f[e],s),b[e]=t(h[e],u),k[e]=t(g[e],a),w[e]=t(p[e],c);i?processResults(n,work,1-o):processResults(work,n,o)},matrix:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,includeAlpha:a,width:c,height:i,offsetX:f,offsetY:h,weights:g,lineOut:p}=e;null==r&&(r=1),null==o&&(o=!0),null==s&&(s=!0),null==u&&(u=!0),null==a&&(a=!1),(null==c||c<1)&&(c=3),(null==i||i<1)&&(i=3),null==f&&(f=1),null==h&&(h=1),null==g&&((g=[].fill(0,0,c*i-1))[Math.floor(g.length/2)+1]=1),grid=buildMatrixGrid(c,i,f,h,t.a);const d=function(e,t){let l=0;for(let n=0,r=t.length;n<r;n++)g[n]&&(l+=e[t[n]]*g[n]);return l},{r:b,g:k,b:w,a:R}=t,{r:O,g:A,b:y,a:I}=l;for(let e=0;e<n;e++)R[e]&&(O[e]=o?d(b,grid[e]):b[e],A[e]=s?d(k,grid[e]):k[e],y[e]=u?d(w,grid[e]):w[e],I[e]=a?d(R,grid[e]):R[e]);p?processResults(l,work,1-r):processResults(work,l,r)},"modulate-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,red:o,green:s,blue:u,alpha:a,saturation:c,lineOut:i}=e;null==r&&(r=1),null==o&&(o=1),null==s&&(s=1),null==u&&(u=1),null==a&&(a=1),null==c&&(c=!1);const{r:f,g:h,b:g,a:p}=t,{r:d,g:b,b:k,a:w}=l;if(c)for(let e=0;e<n;e++)d[e]=127+(f[e]-127)*o,b[e]=127+(h[e]-127)*s,k[e]=127+(g[e]-127)*u,w[e]=127+(p[e]-127)*a;else for(let e=0;e<n;e++)d[e]=f[e]*o,b[e]=h[e]*s,k[e]=g[e]*u,w[e]=p[e]*a;i?processResults(l,work,1-r):processResults(work,l,r)},offset:function(e){let[t,l]=getInputAndOutputChannels(e),{opacity:n,offsetRedX:r,offsetRedY:o,offsetGreenX:s,offsetGreenY:u,offsetBlueX:a,offsetBlueY:c,offsetAlphaX:i,offsetAlphaY:f,lineOut:h}=e;null==n&&(n=1),null==r&&(r=0),null==o&&(o=0),null==s&&(s=0),null==u&&(u=0),null==a&&(a=0),null==c&&(c=0),null==i&&(i=0),null==f&&(f=0);let g=!1;r==s&&r==a&&r==i&&o==u&&o==c&&o==f&&(g=!0);const{r:p,g:d,b:b,a:k}=t,{r:w,g:R,b:O,a:A}=l;let y,I,m,M,x,B,G,C,L,$,N=buildImageGrid(),v=N[0].length,H=N.length;for(let e=0;e<H;e++)for(let t=0;t<v;t++)k[L=N[e][t]]&&(g?(I=e+o,(y=t+r)>=0&&y<v&&I>=0&&I<H&&(w[$=N[I][y]]=p[L],R[$]=d[L],O[$]=b[L],A[$]=k[L])):(I=e+o,m=t+s,M=e+u,x=t+a,B=e+c,G=t+i,C=e+f,(y=t+r)>=0&&y<v&&I>=0&&I<H&&(w[$=N[I][y]]=p[L]),m>=0&&m<v&&M>=0&&M<H&&(R[$=N[M][m]]=d[L]),x>=0&&x<v&&B>=0&&B<H&&(O[$=N[B][x]]=b[L]),G>=0&&G<v&&C>=0&&C<H&&(A[$=N[C][G]]=k[L])));h?processResults(l,work,1-n):processResults(work,l,n)},pixelate:function(e){const t=function(e,t,l){let n=l.reduce((t,l)=>t+e[l],0);n=Math.floor(n/l.length);for(let e=0,r=l.length;e<r;e++)t[l[e]]=n},l=function(e,t,l){let n;for(let r=0,o=l.length;r<o;r++)t[n=l[r]]=e[n]};let[n,r]=getInputAndOutputChannels(e),{opacity:o,tileWidth:s,tileHeight:u,offsetX:a,offsetY:c,includeRed:i,includeGreen:f,includeBlue:h,includeAlpha:g,lineOut:p}=(n.r.length,e);null==o&&(o=1),null==i&&(i=!0),null==f&&(f=!0),null==h&&(h=!0),null==g&&(g=!1),null==s&&(s=1),null==u&&(u=1),null==a&&(a=0),null==c&&(c=0);const d=buildImageTileSets(s,u,a,c),{r:b,g:k,b:w,a:R}=n,{r:O,g:A,b:y,a:I}=r;d.forEach(e=>{i?t(b,O,e):l(b,O,e),f?t(k,A,e):l(k,A,e),h?t(w,y,e):l(w,y,e),g?t(R,I,e):l(R,I,e)}),p?processResults(r,work,1-o):processResults(work,r,o)},"process-image":function(e){const{assetData:t,lineOut:l}=e;if(l&&l.substring&&l.length&&t&&t.width&&t.height&&t.data){let e=t.data,n=e.length,r=createResultObject(n/4),o=r.r,s=r.g,u=r.b,a=r.a,c=0;for(let t=0;t<n;t+=4)o[c]=e[t],s[c]=e[t+1],u[c]=e[t+2],a[c]=e[t+3],c++;t.channels=r,cache[l]=t}},"set-channel-to-level":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,includeRed:o,includeGreen:s,includeBlue:u,includeAlpha:a,level:c,lineOut:i}=e;null==r&&(r=1),null==o&&(o=!1),null==s&&(s=!1),null==u&&(u=!1),null==a&&(a=!1),null==c&&(c=0);const{r:f,g:h,b:g,a:p}=t,{r:d,g:b,b:k,a:w}=l;for(let e=0;e<n;e++)d[e]=o?c:f[e],b[e]=s?c:h[e],k[e]=u?c:g[e],w[e]=a?c:p[e];i?processResults(l,work,1-r):processResults(work,l,r)},"step-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,r=Math.floor,{opacity:o,red:s,green:u,blue:a,lineOut:c}=e;null==o&&(o=1),null==s&&(s=1),null==u&&(u=1),null==a&&(a=1),null==s&&(s=1),null==u&&(u=1),null==a&&(a=1);const{r:i,g:f,b:h,a:g}=t,{r:p,g:d,b:b,a:k}=l;for(let e=0;e<n;e++)p[e]=r(i[e]/s)*s,d[e]=r(f[e]/u)*u,b[e]=r(h[e]/a)*a,k[e]=g[e];c?processResults(l,work,1-o):processResults(work,l,o)},threshold:function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,low:o,high:s,level:u,lineOut:a}=e;null==r&&(r=1),null==o&&(o=[0,0,0]),null==s&&(s=[255,255,255]),null==u&&(u=128);const{r:c,g:i,b:f,a:h}=t,{r:g,g:p,b:d,a:b}=l;let[k,w,R]=o,[O,A,y]=s;for(let e=0;e<n;e++){Math.floor(.2126*c[e]+.7152*i[e]+.0722*f[e])<u?(g[e]=k,p[e]=w,d[e]=R):(g[e]=O,p[e]=A,d[e]=y),b[e]=h[e]}a?processResults(l,work,1-r):processResults(work,l,r)},"tint-channels":function(e){let[t,l]=getInputAndOutputChannels(e),n=t.r.length,{opacity:r,redInRed:o,redInGreen:s,redInBlue:u,greenInRed:a,greenInGreen:c,greenInBlue:i,blueInRed:f,blueInGreen:h,blueInBlue:g,lineOut:p}=e;null==r&&(r=1),null==o&&(o=1),null==s&&(s=0),null==u&&(u=0),null==a&&(a=0),null==c&&(c=1),null==i&&(i=0),null==f&&(f=0),null==h&&(h=0),null==g&&(g=1);const{r:d,g:b,b:k,a:w}=t,{r:R,g:O,b:A,a:y}=l;for(let e=0;e<n;e++){let t=d[e],l=b[e],n=k[e];R[e]=Math.floor(t*o+l*a+n*f),O[e]=Math.floor(t*s+l*c+n*h),A[e]=Math.floor(t*u+l*i+n*g),y[e]=w[e]}p?processResults(l,work,1-r):processResults(work,l,r)},"user-defined-legacy":function(e){let[t,l]=getInputAndOutputChannels(e),{opacity:n,lineOut:r}=e;null==n&&(n=1),copyOver(t,l),r?processResults(l,work,1-n):processResults(work,l,n)}};'
};


const filterUrl = URL.createObjectURL(

    new Blob([ filterCode() ], { type: 'text/javascript' })
);

// #### Exports
export {
    filterUrl,
};
