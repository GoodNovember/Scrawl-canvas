<!DOCTYPE html>

<html>
<head>
  <title>NoiseAsset factory</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="../core/animationloop.html">
                  ./source/core/animationloop.js
                </a>
              
                
                <a class="source" href="../core/document.html">
                  ./source/core/document.js
                </a>
              
                
                <a class="source" href="../core/events.html">
                  ./source/core/events.js
                </a>
              
                
                <a class="source" href="../core/init.html">
                  ./source/core/init.js
                </a>
              
                
                <a class="source" href="../core/library.html">
                  ./source/core/library.js
                </a>
              
                
                <a class="source" href="../core/random-seed.html">
                  ./source/core/random-seed.js
                </a>
              
                
                <a class="source" href="../core/snippets.html">
                  ./source/core/snippets.js
                </a>
              
                
                <a class="source" href="../core/userInteraction.html">
                  ./source/core/userInteraction.js
                </a>
              
                
                <a class="source" href="../core/utilities.html">
                  ./source/core/utilities.js
                </a>
              
                
                <a class="source" href="action.html">
                  ./source/factory/action.js
                </a>
              
                
                <a class="source" href="anchor.html">
                  ./source/factory/anchor.js
                </a>
              
                
                <a class="source" href="animation.html">
                  ./source/factory/animation.js
                </a>
              
                
                <a class="source" href="bezier.html">
                  ./source/factory/bezier.js
                </a>
              
                
                <a class="source" href="block.html">
                  ./source/factory/block.js
                </a>
              
                
                <a class="source" href="canvas.html">
                  ./source/factory/canvas.js
                </a>
              
                
                <a class="source" href="cell.html">
                  ./source/factory/cell.js
                </a>
              
                
                <a class="source" href="cog.html">
                  ./source/factory/cog.js
                </a>
              
                
                <a class="source" href="color.html">
                  ./source/factory/color.js
                </a>
              
                
                <a class="source" href="conicGradient.html">
                  ./source/factory/conicGradient.js
                </a>
              
                
                <a class="source" href="coordinate.html">
                  ./source/factory/coordinate.js
                </a>
              
                
                <a class="source" href="crescent.html">
                  ./source/factory/crescent.js
                </a>
              
                
                <a class="source" href="element.html">
                  ./source/factory/element.js
                </a>
              
                
                <a class="source" href="emitter.html">
                  ./source/factory/emitter.js
                </a>
              
                
                <a class="source" href="filter.html">
                  ./source/factory/filter.js
                </a>
              
                
                <a class="source" href="filterEngine-bluenoiseData.html">
                  ./source/factory/filterEngine-bluenoiseData.js
                </a>
              
                
                <a class="source" href="filterEngine.html">
                  ./source/factory/filterEngine.js
                </a>
              
                
                <a class="source" href="fontAttributes.html">
                  ./source/factory/fontAttributes.js
                </a>
              
                
                <a class="source" href="gradient.html">
                  ./source/factory/gradient.js
                </a>
              
                
                <a class="source" href="grid.html">
                  ./source/factory/grid.js
                </a>
              
                
                <a class="source" href="group.html">
                  ./source/factory/group.js
                </a>
              
                
                <a class="source" href="imageAsset.html">
                  ./source/factory/imageAsset.js
                </a>
              
                
                <a class="source" href="line.html">
                  ./source/factory/line.js
                </a>
              
                
                <a class="source" href="lineSpiral.html">
                  ./source/factory/lineSpiral.js
                </a>
              
                
                <a class="source" href="loom.html">
                  ./source/factory/loom.js
                </a>
              
                
                <a class="source" href="mesh.html">
                  ./source/factory/mesh.js
                </a>
              
                
                <a class="source" href="net.html">
                  ./source/factory/net.js
                </a>
              
                
                <a class="source" href="noiseAsset.html">
                  ./source/factory/noiseAsset.js
                </a>
              
                
                <a class="source" href="oval.html">
                  ./source/factory/oval.js
                </a>
              
                
                <a class="source" href="palette.html">
                  ./source/factory/palette.js
                </a>
              
                
                <a class="source" href="particle.html">
                  ./source/factory/particle.js
                </a>
              
                
                <a class="source" href="particleForce.html">
                  ./source/factory/particleForce.js
                </a>
              
                
                <a class="source" href="particleHistory.html">
                  ./source/factory/particleHistory.js
                </a>
              
                
                <a class="source" href="particleSpring.html">
                  ./source/factory/particleSpring.js
                </a>
              
                
                <a class="source" href="particleWorld.html">
                  ./source/factory/particleWorld.js
                </a>
              
                
                <a class="source" href="pattern.html">
                  ./source/factory/pattern.js
                </a>
              
                
                <a class="source" href="phrase.html">
                  ./source/factory/phrase.js
                </a>
              
                
                <a class="source" href="picture.html">
                  ./source/factory/picture.js
                </a>
              
                
                <a class="source" href="polygon.html">
                  ./source/factory/polygon.js
                </a>
              
                
                <a class="source" href="polyline.html">
                  ./source/factory/polyline.js
                </a>
              
                
                <a class="source" href="quadratic.html">
                  ./source/factory/quadratic.js
                </a>
              
                
                <a class="source" href="quaternion.html">
                  ./source/factory/quaternion.js
                </a>
              
                
                <a class="source" href="radialGradient.html">
                  ./source/factory/radialGradient.js
                </a>
              
                
                <a class="source" href="rawAsset.html">
                  ./source/factory/rawAsset.js
                </a>
              
                
                <a class="source" href="rdAsset.html">
                  ./source/factory/rdAsset.js
                </a>
              
                
                <a class="source" href="rectangle.html">
                  ./source/factory/rectangle.js
                </a>
              
                
                <a class="source" href="renderAnimation.html">
                  ./source/factory/renderAnimation.js
                </a>
              
                
                <a class="source" href="shape.html">
                  ./source/factory/shape.js
                </a>
              
                
                <a class="source" href="spiral.html">
                  ./source/factory/spiral.js
                </a>
              
                
                <a class="source" href="spriteAsset.html">
                  ./source/factory/spriteAsset.js
                </a>
              
                
                <a class="source" href="stack.html">
                  ./source/factory/stack.js
                </a>
              
                
                <a class="source" href="star.html">
                  ./source/factory/star.js
                </a>
              
                
                <a class="source" href="state.html">
                  ./source/factory/state.js
                </a>
              
                
                <a class="source" href="tetragon.html">
                  ./source/factory/tetragon.js
                </a>
              
                
                <a class="source" href="ticker.html">
                  ./source/factory/ticker.js
                </a>
              
                
                <a class="source" href="tracer.html">
                  ./source/factory/tracer.js
                </a>
              
                
                <a class="source" href="tween.html">
                  ./source/factory/tween.js
                </a>
              
                
                <a class="source" href="unstackedElement.html">
                  ./source/factory/unstackedElement.js
                </a>
              
                
                <a class="source" href="vector.html">
                  ./source/factory/vector.js
                </a>
              
                
                <a class="source" href="videoAsset.html">
                  ./source/factory/videoAsset.js
                </a>
              
                
                <a class="source" href="wheel.html">
                  ./source/factory/wheel.js
                </a>
              
                
                <a class="source" href="../mixin/anchor.html">
                  ./source/mixin/anchor.js
                </a>
              
                
                <a class="source" href="../mixin/asset.html">
                  ./source/mixin/asset.js
                </a>
              
                
                <a class="source" href="../mixin/assetAdvancedFunctionality.html">
                  ./source/mixin/assetAdvancedFunctionality.js
                </a>
              
                
                <a class="source" href="../mixin/assetConsumer.html">
                  ./source/mixin/assetConsumer.js
                </a>
              
                
                <a class="source" href="../mixin/base.html">
                  ./source/mixin/base.js
                </a>
              
                
                <a class="source" href="../mixin/cascade.html">
                  ./source/mixin/cascade.js
                </a>
              
                
                <a class="source" href="../mixin/delta.html">
                  ./source/mixin/delta.js
                </a>
              
                
                <a class="source" href="../mixin/displayShape.html">
                  ./source/mixin/displayShape.js
                </a>
              
                
                <a class="source" href="../mixin/dom.html">
                  ./source/mixin/dom.js
                </a>
              
                
                <a class="source" href="../mixin/entity.html">
                  ./source/mixin/entity.js
                </a>
              
                
                <a class="source" href="../mixin/filter.html">
                  ./source/mixin/filter.js
                </a>
              
                
                <a class="source" href="../mixin/mimic.html">
                  ./source/mixin/mimic.js
                </a>
              
                
                <a class="source" href="../mixin/path.html">
                  ./source/mixin/path.js
                </a>
              
                
                <a class="source" href="../mixin/pattern.html">
                  ./source/mixin/pattern.js
                </a>
              
                
                <a class="source" href="../mixin/pivot.html">
                  ./source/mixin/pivot.js
                </a>
              
                
                <a class="source" href="../mixin/position.html">
                  ./source/mixin/position.js
                </a>
              
                
                <a class="source" href="../mixin/shapeBasic.html">
                  ./source/mixin/shapeBasic.js
                </a>
              
                
                <a class="source" href="../mixin/shapeCurve.html">
                  ./source/mixin/shapeCurve.js
                </a>
              
                
                <a class="source" href="../mixin/shapePathCalculation.html">
                  ./source/mixin/shapePathCalculation.js
                </a>
              
                
                <a class="source" href="../mixin/styles.html">
                  ./source/mixin/styles.js
                </a>
              
                
                <a class="source" href="../mixin/tween.html">
                  ./source/mixin/tween.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <h1 id="noiseasset-factory">NoiseAsset factory</h1>
<p>The purpose of the NoiseAsset asset is to give us a resource for generating noisy (semi-regular) maps. These can then be used directly as Picture or Pattern images, or uploaded to the filter engine as part of a filter that uses displacement map functionality.</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <h4 id="current-functionality">Current functionality</h4>
<p>At the moment the NoiseAsset asset can generate Perlin-type noise, with engines supplied for:</p>
<ul>
<li>Perlin (classic)</li>
<li>Perlin (improved)</li>
<li>Simplex - the default engine</li>
<li>Value</li>
</ul>
<p>Additional engines include:</p>
<ul>
<li>Stripes</li>
<li>Smoothed stripes</li>
<li>Worley - both euclidean and manhattan versions</li>
</ul>
<p>These engines are supported by a number of settable (and thus animatable) attributes, including special functions for smoothing the engine output. Demo <a href="../../demo/filters-019.html">Filters-019</a> has been set up to allow for experimenting with these attributes</p>
<p>The noise generated will be output to a dedicated offscreen &lt;canvas&gt; element, which is the asset used by Picture entitys, Pattern styles and filters. The output image can be set to three color schemas:</p>
<ul>
<li><strong>Monochrome</strong> (black - gray - white)</li>
<li><strong>Gradient</strong> - mediated by a Scrawl-canvas Color object</li>
<li><strong>Hue</strong> - where the engine output for each pixel is interpreted as the hue component of an HSL color</li>
<li><strong>Rainbow</strong> - to map a more complex Scrawl-canvas gradient to the noise output (for instance, to create contour lines and shading)</li>
</ul>
<p>(<em><strong>NOTE:</strong></em> Perlin, Simplex and Value noise generator code based on code found in the <a href="https://github.com/lencinhaus/canvas-noise">canvas-noise GitHub repository</a> written by <a href="https://github.com/lencinhaus">lencinhaus</a>.</p>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <h4 id="demos">Demos:</h4>
<ul>
<li><a href="../../demo/canvas-044.html">Canvas-044</a> - Building more complex patterns</li>
<li><a href="../../demo/filters-019.html">Filters-019</a> - Using a Noise asset with a displace filter</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <h4 id="imports">Imports</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> { constructors } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../core/library.js&#x27;</span>;
<span class="hljs-keyword">import</span> { seededRandomNumberGenerator } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../core/random-seed.js&#x27;</span>;
<span class="hljs-keyword">import</span> { mergeOver, λ<span class="hljs-literal">null</span>, λ<span class="hljs-variable language_">this</span>, λfirstArg, removeItem, interpolate, easeEngines, Ωempty } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../core/utilities.js&#x27;</span>;

<span class="hljs-keyword">import</span> { makeColor } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./color.js&#x27;</span>;

<span class="hljs-keyword">import</span> baseMix <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../mixin/base.js&#x27;</span>;
<span class="hljs-keyword">import</span> assetMix <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../mixin/asset.js&#x27;</span>;
<span class="hljs-keyword">import</span> assetAdvancedMix <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../mixin/assetAdvancedFunctionality.js&#x27;</span>;
<span class="hljs-keyword">import</span> patternMix <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../mixin/pattern.js&#x27;</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <h4 id="noiseasset-constructor">NoiseAsset constructor</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> <span class="hljs-title class_">NoiseAsset</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">items = Ωempty</span>) {

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">makeName</span>(items.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">register</span>();

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">installElement</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">perm</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">permMod8</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">grad</span> = [];

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span> = [];

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">defs</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(items);

    <span class="hljs-keyword">if</span> (items.<span class="hljs-property">subscribe</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscribers</span>.<span class="hljs-title function_">push</span>(items.<span class="hljs-property">subscribe</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <h4 id="noiseasset-prototype">NoiseAsset prototype</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> P = <span class="hljs-title class_">NoiseAsset</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
P.<span class="hljs-property">type</span> = <span class="hljs-string">&#x27;NoiseAsset&#x27;</span>;
P.<span class="hljs-property">lib</span> = <span class="hljs-string">&#x27;asset&#x27;</span>;
P.<span class="hljs-property">isArtefact</span> = <span class="hljs-literal">false</span>;
P.<span class="hljs-property">isAsset</span> = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <h4 id="mixins">Mixins</h4>
<ul>
<li><a href="../mixin/base.html">base</a></li>
<li><a href="../mixin/asset.html">asset</a></li>
<li><a href="../mixin/assetAdvancedFunctionality.html">assetAdvancedFunctionality</a></li>
<li><a href="../mixin/pattern.html">pattern</a></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P = <span class="hljs-title function_">baseMix</span>(P);
P = <span class="hljs-title function_">assetMix</span>(P);
P = <span class="hljs-title function_">assetAdvancedMix</span>(P);
P = <span class="hljs-title function_">patternMix</span>(P);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <h4 id="noiseasset-attributes">NoiseAsset attributes</h4>
<ul>
<li>Attributes defined in the <a href="../mixin/base.html">base mixin</a>: <strong>name</strong>.</li>
<li>Attributes defined in the <a href="../mixin/asset.html">asset mixin</a>: <strong>source, subscribers</strong>.</li>
<li>Attributes defined in the <a href="../mixin/assetAdvancedFunctionality.html">assetAdvancedFunctionality mixin</a>: <strong>color, monochromeStart, monochromeRange, gradientStart, gradientEnd, hueStart, hueRange, saturation, luminosity</strong>.</li>
<li>Attributes defined in the <a href="../mixin/pattern.html">pattern mixin</a>: <strong>repeat, patternMatrix, matrixA, matrixB, matrixC, matrixD, matrixE, matrixF</strong>.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> defaultAttributes = {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>The offscreen canvas dimensions, within which the noise will be generated, is set using the <strong>width</strong> and <strong>height</strong> attributes. These take Number values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">150</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <p><strong>noiseEngine</strong> - String - the currently supported noise engines String values are: <code>perlin</code>, <code>improved-perlin</code>, <code>simplex</code>, <code>value</code>, <code>stripes</code>, <code>smoothed-stripes</code>, <code>worley-euclidean</code>, <code>worley-manhattan</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">noiseEngine</span>: <span class="hljs-string">&#x27;simplex&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <p>When a noise engine initializes it will create several Arrays of pseudo-random values. The <strong>seed</strong> attribute is a String used to initialize the pseudo-random number generator, while the <strong>size</strong> attribute is a Number (often a power of 2 value) which determines the lengths of the Arrays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">seed</span>: <span class="hljs-string">&#x27;any_random_string_will_do&#x27;</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">256</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <p>The <strong>scale</strong> attribute determines the relative scale of the noise calculation, which affects the noise output. Think of it as a rather idiosyncratic zoom factor </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">scale</span>: <span class="hljs-number">50</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <p>Attributes used when calculating the noise map include:</p>
<ul>
<li><strong>octaves</strong> - a positive integer Number - the more octives, the more naturalistic the output - values over 6 are rarely productive</li>
<li>__octaveFunction - a String identifying the function to be run at the end of each octave loop. Currently only <code>none</code> and <code>absolute</code> functions are supported</li>
<li><strong>persistance</strong> and <strong>lacunarity</strong> values change at the conclusion of each octave loop; these attributes set their initial values</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">octaves</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">octaveFunction</span>: <span class="hljs-string">&#x27;none&#x27;</span>,
    <span class="hljs-attr">persistence</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">lacunarity</span>: <span class="hljs-number">2</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <p>The <strong>smoothing</strong> attribute - a String value - identifies the smoothing function that will be applied pixel noise values as they are calculated. There are a wide number of functions available; default: <code>quintic</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">smoothing</span>: <span class="hljs-string">&#x27;quintic&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <p>Post-processing the noise map: The <strong>sumFunction</strong> attribute - a String value - identifies the smoothing function that will be applied to the noise map once the noise calculations complete. </p>
<ul>
<li>Permitted values include: <code>none</code>, <code>sine-x</code>, <code>sine-y</code>, <code>sine</code>, <code>modular</code></li>
<li><strong>sineFrequencyCoeff</strong> - a Number - is used by sine-based sum functions</li>
<li><strong>sumAmplitude</strong> - a Number - is used by the modular sum function</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">sumFunction</span>: <span class="hljs-string">&#x27;none&#x27;</span>,
    <span class="hljs-attr">sineFrequencyCoeff</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">sumAmplitude</span>: <span class="hljs-number">5</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <p>Worley functionality found in the <a href="https://github.com/jackunion/tooloud/blob/master/src/Worley.js">jackunion/tooloud GitHub repository</a>. </p>
<ul>
<li>The noise generated can be one of <strong>worley-euclidean</strong> or <strong>worley-manhattan</strong></li>
<li>we can amend the noise via the <code>worleyOutput</code> and <code>worleyDepth</code> attributes</li>
</ul>
<p><strong>worleyOutput</strong> - String value, one from: ‘X’, ‘Y’, ‘Z’, ‘XminusY’, ‘XminusZ’, ‘YminusX’, ‘YminusZ’, ‘ZminusX’, ‘ZminusY’, ‘XaddY’, ‘XaddZ’, ‘YaddZ’, ‘XaddYminusZ’, ‘XaddZminusY’, ‘YaddZminusX’, ‘XmultiplyY’, ‘XmultiplyZ’, ‘YmultiplyZ’, ‘XmultiplyYaddZ’, ‘XmultiplyZaddY’, ‘YmultiplyZaddX’, ‘XmultiplyYminusZ’, ‘XmultiplyZminusY’, ‘YmultiplyZminusX’, ‘sum’, ‘average’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">worleyOutput</span>: <span class="hljs-string">&#x27;X&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <p>worleyDepth - positive integer Number - Scrawl-canvas only uses the x and y dimensions to calculate noise; worley noise also comes with a z dimension which we can amend via this attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">worleyDepth</span>: <span class="hljs-number">0</span>,
};
P.<span class="hljs-property">defs</span> = <span class="hljs-title function_">mergeOver</span>(P.<span class="hljs-property">defs</span>, defaultAttributes);

<span class="hljs-keyword">delete</span> P.<span class="hljs-property">defs</span>.<span class="hljs-property">source</span>;
<span class="hljs-keyword">delete</span> P.<span class="hljs-property">defs</span>.<span class="hljs-property">sourceLoaded</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <h4 id="packet-management">Packet management</h4>
<p>This functionality is disabled for noiseAsset objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">stringifyFunction</span> = λ<span class="hljs-literal">null</span>;
P.<span class="hljs-property">processPacketOut</span> = λ<span class="hljs-literal">null</span>;
P.<span class="hljs-property">finalizePacketOut</span> = λ<span class="hljs-literal">null</span>;
P.<span class="hljs-property">saveAsPacket</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">return</span> <span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.lib}</span>, {}]`</span>
};</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <h4 id="clone-management">Clone management</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">clone</span> = λ<span class="hljs-variable language_">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <h4 id="kill-management">Kill management</h4>
<p>No additional kill functionality required</p>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-21">&#x00a7;</a>
              </div>
              <h4 id="get-set-deltaset">Get, Set, deltaSet</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> G = P.<span class="hljs-property">getters</span>,
    S = P.<span class="hljs-property">setters</span>,
    D = P.<span class="hljs-property">deltaSetters</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-22">&#x00a7;</a>
              </div>
              <p><strong>source</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.<span class="hljs-property">source</span> = λ<span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-23">&#x00a7;</a>
              </div>
              <p><strong>subscribers</strong> - we disable the ability to set the subscribers Array directly. Picture entitys and Pattern styles will manage their subscription to the asset using their subscribe() and unsubscribe() functions. Filters will check for updates every time they run</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.<span class="hljs-property">subscribers</span> = λ<span class="hljs-literal">null</span>;

S.<span class="hljs-property">octaveFunction</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">octaveFunction</span> = (<span class="hljs-literal">null</span> != <span class="hljs-variable language_">this</span>.<span class="hljs-property">octaveFunctions</span>[item]) ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">octaveFunctions</span>[item] : λfirstArg;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
};

S.<span class="hljs-property">sumFunction</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumFunction</span> = (<span class="hljs-literal">null</span> != <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumFunctions</span>[item]) ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumFunctions</span>[item] : λfirstArg;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
};

S.<span class="hljs-property">smoothing</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">smoothing</span> = (<span class="hljs-literal">null</span> != easeEngines[item]) ? easeEngines[item] : λfirstArg;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
};

S.<span class="hljs-property">noiseEngine</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseEngine</span> = (<span class="hljs-literal">null</span> != <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseEngines</span>[item]) ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseEngines</span>[item] : <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseEngines</span>[<span class="hljs-string">&#x27;simplex&#x27;</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
};

S.<span class="hljs-property">octaves</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">octaves</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">seed</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">substring</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">seed</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">scale</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">scale</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">persistence</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">persistence</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">lacunarity</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lacunarity</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">sineFrequencyCoeff</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sineFrequencyCoeff</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-24">&#x00a7;</a>
              </div>
              <p><code>modularAmplitude</code> - name changed to <code>sumAmplitude</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>S.<span class="hljs-property">modularAmplitude</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumAmplitude</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">sumAmplitude</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumAmplitude</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">width</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceNaturalWidth</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">height</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sourceNaturalHeight</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

S.<span class="hljs-property">worleyDepth</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">toFixed</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleyDepth</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};

P.<span class="hljs-property">worleyOutputStrings</span> = [<span class="hljs-string">&#x27;X&#x27;</span>, <span class="hljs-string">&#x27;Y&#x27;</span>, <span class="hljs-string">&#x27;Z&#x27;</span>, <span class="hljs-string">&#x27;XminusY&#x27;</span>, <span class="hljs-string">&#x27;XminusZ&#x27;</span>, <span class="hljs-string">&#x27;YminusX&#x27;</span>, <span class="hljs-string">&#x27;YminusZ&#x27;</span>, <span class="hljs-string">&#x27;ZminusX&#x27;</span>, <span class="hljs-string">&#x27;ZminusY&#x27;</span>, <span class="hljs-string">&#x27;XaddY&#x27;</span>, <span class="hljs-string">&#x27;XaddZ&#x27;</span>, <span class="hljs-string">&#x27;YaddZ&#x27;</span>, <span class="hljs-string">&#x27;XaddYminusZ&#x27;</span>, <span class="hljs-string">&#x27;XaddZminusY&#x27;</span>, <span class="hljs-string">&#x27;YaddZminusX&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyY&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyZ&#x27;</span>, <span class="hljs-string">&#x27;YmultiplyZ&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyYaddZ&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyZaddY&#x27;</span>, <span class="hljs-string">&#x27;YmultiplyZaddX&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyYminusZ&#x27;</span>, <span class="hljs-string">&#x27;XmultiplyZminusY&#x27;</span>, <span class="hljs-string">&#x27;YmultiplyZminusX&#x27;</span>, <span class="hljs-string">&#x27;sum&#x27;</span>];
S.<span class="hljs-property">worleyOutput</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

    <span class="hljs-keyword">if</span> (item.<span class="hljs-property">substring</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleyOutputStrings</span>.<span class="hljs-title function_">indexOf</span>(item) &gt;= <span class="hljs-number">0</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleyOutput</span> = item;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span> = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-25">&#x00a7;</a>
              </div>
              <h4 id="prototype-functions">Prototype functions</h4>
<p><code>cleanOutput</code> - internal function called by the <code>notifySubscribers</code> function</p>
<ul>
<li>The <code>paintCanvas</code> function is supplied by the <em>assetAdvancedFunctionality.js</em> mixin</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">cleanOutput</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanNoise</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyOutput</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">paintCanvas</span>();
};</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-26">&#x00a7;</a>
              </div>
              <p><code>cleanNoise</code> - internal function called by the <code>cleanOutput</code> function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">cleanNoise</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span>) {

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">let</span> {noiseEngine, seed, width, height, element, engine, octaves, lacunarity, persistence, scale, octaveFunction, sumFunction} = <span class="hljs-variable language_">this</span>;

        <span class="hljs-keyword">if</span> (noiseEngine &amp;&amp; noiseEngine.<span class="hljs-property">init</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-27">&#x00a7;</a>
              </div>
              <p>Seed our pseudo-random number generator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">rndEngine</span> = <span class="hljs-title function_">seededRandomNumberGenerator</span>(seed);</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-28">&#x00a7;</a>
              </div>
              <p>Generate the permutations table(s)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generatePermutationTable</span>();</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-29">&#x00a7;</a>
              </div>
              <p>Initialize the appropriate noise function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            noiseEngine.<span class="hljs-property">init</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);

            <span class="hljs-keyword">let</span> x, y, o, i, iz,
                noiseValues = [],
                scaledX, scaledY,
                totalNoise, amplitude, frequency;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-30">&#x00a7;</a>
              </div>
              <p>Prepare the noiseValues 2d array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (y = <span class="hljs-number">0</span>; y &lt; height; y++) {

                noiseValues[y] = [];

                <span class="hljs-keyword">for</span> (x = <span class="hljs-number">0</span>; x &lt; width; x++) {
                    noiseValues[y][x] = [];
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-31">&#x00a7;</a>
              </div>
              <p>Calculate a relative scale, and setup min/max variables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">let</span> relativeScale = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(width, -scale / <span class="hljs-number">100</span>);

            <span class="hljs-keyword">let</span> max = -<span class="hljs-number">1000</span>, 
                min = <span class="hljs-number">1000</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-32">&#x00a7;</a>
              </div>
              <p>This is the core of the calculation, performed for each cell in the noiseValues 2d array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">let</span> name = noiseEngine.<span class="hljs-property">name</span>;
            <span class="hljs-keyword">if</span> ([<span class="hljs-string">&#x27;stripes&#x27;</span>, <span class="hljs-string">&#x27;smoothed-stripes&#x27;</span>, <span class="hljs-string">&#x27;worley-euclidean&#x27;</span>, <span class="hljs-string">&#x27;worley-manhattan&#x27;</span>].<span class="hljs-title function_">indexOf</span>(name) &gt;= <span class="hljs-number">0</span>) {

                <span class="hljs-keyword">for</span> (y = <span class="hljs-number">0</span>; y &lt; height; y++) {
                    <span class="hljs-keyword">for</span> (x = <span class="hljs-number">0</span>; x &lt; width; x++) {

                        scaledX = x * relativeScale;
                        scaledY = y * relativeScale;

                        totalNoise = noiseEngine.<span class="hljs-property">getNoiseValue</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, scaledX, scaledY);

                        noiseValues[y][x] = totalNoise;

                        min = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(min, totalNoise);
                        max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(max, totalNoise);
                    }
                }
            }
            <span class="hljs-keyword">else</span> {

                <span class="hljs-keyword">for</span> (y = <span class="hljs-number">0</span>; y &lt; height; y++) {
                    <span class="hljs-keyword">for</span> (x = <span class="hljs-number">0</span>; x &lt; width; x++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-33">&#x00a7;</a>
              </div>
              <p>We can modify the output by scaling it</p>
<ul>
<li>Note that modifying the canvas dimensions (width, height) can also have a scaling effect</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        scaledX = x * relativeScale;
                        scaledY = y * relativeScale;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-34">&#x00a7;</a>
              </div>
              <p>Amplitude and frequency will update once per octave calculation; totalNoise is the sum of all octave results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        totalNoise = <span class="hljs-number">0</span>;
                        amplitude = <span class="hljs-number">1</span>; 
                        frequency = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-35">&#x00a7;</a>
              </div>
              <p>The calculation will be performed at least once</p>
<ul>
<li>For some reason the literature insists on calling these loops “octaves”</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        <span class="hljs-keyword">for</span> (o = <span class="hljs-number">0</span>; o &lt; octaves; o++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-36">&#x00a7;</a>
              </div>
              <p>Call the appropriate getNoiseValue function</p>
<ul>
<li>The result needs to be stored in a variable scoped locally to this loop iteration</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-keyword">let</span> octaveNoise = noiseEngine.<span class="hljs-property">getNoiseValue</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, scaledX * frequency, scaledY * frequency);</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-37">&#x00a7;</a>
              </div>
              <p>Update octave with a post-calculation octaveFunction, if required</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            octaveNoise = <span class="hljs-title function_">octaveFunction</span>(octaveNoise, scaledX, scaledY, o + <span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-38">&#x00a7;</a>
              </div>
              <p>Modify result by the current amplitude, and add to the running total</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            octaveNoise *= amplitude;
                            totalNoise += octaveNoise;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-39">&#x00a7;</a>
              </div>
              <p>Update the variables that change over multiple octave loops</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            frequency *= lacunarity;
                            amplitude *= persistence;
                        }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-40">&#x00a7;</a>
              </div>
              <p>Update the noise value in its array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        noiseValues[y][x] = totalNoise;</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-41">&#x00a7;</a>
              </div>
              <p>… and check for max/min spread of the generated values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        min = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(min, totalNoise);
                        max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(max, totalNoise);
                    }
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-42">&#x00a7;</a>
              </div>
              <p>Calculate the span of numbers generated - we need to get all the results in the range 0 to 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">let</span> noiseSpan = max - min;

            <span class="hljs-keyword">for</span> (y = <span class="hljs-number">0</span>; y &lt; height; y++) {
                <span class="hljs-keyword">for</span> (x = <span class="hljs-number">0</span>; x &lt; width; x++) {

                    scaledX = x * relativeScale;
                    scaledY = y * relativeScale;</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-43">&#x00a7;</a>
              </div>
              <p>Clamp the cell’s noise value to between 0 and 1, then update it with the post-calculation sumFunction, if required</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">let</span> clampedVal = (noiseValues[y][x] - min) / noiseSpan;
                    noiseValues[y][x] = sumFunction.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, clampedVal, x * relativeScale, y * relativeScale);
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-44">&#x00a7;</a>
              </div>
              <p>Update the cached noise values arrays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseValues</span> = noiseValues;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyNoise</span> = <span class="hljs-literal">true</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-45">&#x00a7;</a>
              </div>
              <p><code>checkOutputValuesExist</code> and <code>getOutputValue</code> are internal variables that must be defined by any asset that makes use of the <em>assetAdvancedFunctionality.js</em> mixin and its <code>paintCanvas</code> function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">checkOutputValuesExist</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">return</span> (<span class="hljs-literal">null</span> != <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseValues</span>) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;
};
P.<span class="hljs-property">getOutputValue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">index, width</span>) {

    <span class="hljs-keyword">let</span> row = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(index / width),
        col = index - (row * width);

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">noiseValues</span>[row][col];
};</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-46">&#x00a7;</a>
              </div>
              <h4 id="noiseasset-generator-functionality">NoiseAsset generator functionality</h4>

            </div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-47">&#x00a7;</a>
              </div>
              <p>Convenience constants
P.F = 0.5 * (Math.sqrt(3) - 1);
P.G = (3 - Math.sqrt(3)) / 6;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">simplexConstantF</span> = <span class="hljs-number">0.5</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">3</span>) - <span class="hljs-number">1</span>);
P.<span class="hljs-property">simplexConstantG</span> = (<span class="hljs-number">3</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">3</span>)) / <span class="hljs-number">6</span>;
P.<span class="hljs-property">simplexConstantDoubleG</span> = ((<span class="hljs-number">3</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">3</span>)) / <span class="hljs-number">6</span>) * <span class="hljs-number">2</span>;
P.<span class="hljs-property">perlinGrad</span> = [[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>], [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]];</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-48">&#x00a7;</a>
              </div>
              <p><code>noiseEngines</code> - a {key:object} object. Each named object contains two functions:</p>
<ul>
<li><strong>init</strong> - invoked to prepare the engine for a bout of calculations - called by the <code>cleanNoise</code> function</li>
<li><strong>getNoiseValue</strong> - a function called on a per-pixel basis, which calculates the noise value for that pixel</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">noiseEngines</span> = {</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-49">&#x00a7;</a>
              </div>
              <p>The classic Perlin noise generator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;perlin&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;perlin&#x27;</span>,

        <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

            <span class="hljs-keyword">const</span> {grad, size, rndEngine} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">let</span> dist;
            
            grad.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {

                grad[i] = [(rndEngine.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>, (rndEngine.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>];
                dist = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(grad[i][<span class="hljs-number">0</span>] *  grad[i][<span class="hljs-number">0</span>] + grad[i][<span class="hljs-number">1</span>] * grad[i][<span class="hljs-number">1</span>]);
                grad[i][<span class="hljs-number">0</span>] /= dist;
                grad[i][<span class="hljs-number">1</span>] /= dist;
            }
        },

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {size, perm, grad, smoothing} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">let</span> a, b, u, v;

            <span class="hljs-keyword">let</span> bx0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x) % size,
                bx1 = (bx0 + <span class="hljs-number">1</span>) % size;

            <span class="hljs-keyword">let</span> rx0 = x - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x),
                rx1 = rx0 - <span class="hljs-number">1</span>;

            <span class="hljs-keyword">let</span> by0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y) % size,
                by1 = (by0 + <span class="hljs-number">1</span>) % size;

            <span class="hljs-keyword">let</span> ry0 = y - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y),
                ry1 = ry0 - <span class="hljs-number">1</span>;

            <span class="hljs-keyword">let</span> i = perm[bx0],
                j = perm[bx1];

            <span class="hljs-keyword">let</span> b00 = perm[i + by0],
                b10 = perm[j + by0],
                b01 = perm[i + by1],
                b11 = perm[j + by1];

            <span class="hljs-keyword">let</span> sx = <span class="hljs-title function_">smoothing</span>(rx0),
                sy = <span class="hljs-title function_">smoothing</span>(ry0);
            
            u = rx0 * grad[b00][<span class="hljs-number">0</span>] + ry0 * grad[b00][<span class="hljs-number">1</span>];
            v = rx1 * grad[b10][<span class="hljs-number">0</span>] + ry0 * grad[b10][<span class="hljs-number">1</span>];
            a = <span class="hljs-title function_">interpolate</span>(sx, u, v);
            
            u = rx0 * grad[b01][<span class="hljs-number">0</span>] + ry1 * grad[b01][<span class="hljs-number">1</span>];
            v = rx1 * grad[b11][<span class="hljs-number">0</span>] + ry1 * grad[b11][<span class="hljs-number">1</span>];
            b = <span class="hljs-title function_">interpolate</span>(sx, u, v);
            
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * (<span class="hljs-number">1</span> + <span class="hljs-title function_">interpolate</span>(sy, a, b));
        },
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-50">&#x00a7;</a>
              </div>
              <p>An improved Perlin noise generator</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;improved-perlin&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;improved-perlin&#x27;</span>,

        <span class="hljs-attr">init</span>: λ<span class="hljs-literal">null</span>,

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {size, perm, permMod8, perlinGrad, smoothing} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">let</span> a, b, u, v;

            <span class="hljs-keyword">let</span> bx0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x) % size, 
                bx1 = (bx0 + <span class="hljs-number">1</span>) % size;

            <span class="hljs-keyword">let</span> rx0 = x - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x), 
                rx1 = rx0 - <span class="hljs-number">1</span>;

            <span class="hljs-keyword">let</span> by0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y) % size, 
                by1 = (by0 + <span class="hljs-number">1</span>) % size;

            <span class="hljs-keyword">let</span> ry0 = y - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y), 
                ry1 = ry0 - <span class="hljs-number">1</span>;

            <span class="hljs-keyword">let</span> i = perm[bx0], 
                j = perm[bx1]; 

            <span class="hljs-keyword">let</span> b00 = permMod8[i + by0], 
                b10 = permMod8[j + by0], 
                b01 = permMod8[i + by1], 
                b11 = permMod8[j + by1];
            
            <span class="hljs-keyword">let</span> sx = <span class="hljs-title function_">smoothing</span>(rx0),
                sy = <span class="hljs-title function_">smoothing</span>(ry0);
            
            u = rx0 * perlinGrad[b00][<span class="hljs-number">0</span>] + ry0 * perlinGrad[b00][<span class="hljs-number">1</span>];
            v = rx1 * perlinGrad[b10][<span class="hljs-number">0</span>] + ry0 * perlinGrad[b10][<span class="hljs-number">1</span>];
            a = <span class="hljs-title function_">interpolate</span>(sx, u, v);
            
            u = rx0 * perlinGrad[b01][<span class="hljs-number">0</span>] + ry1 * perlinGrad[b01][<span class="hljs-number">1</span>];
            v = rx1 * perlinGrad[b11][<span class="hljs-number">0</span>] + ry1 * perlinGrad[b11][<span class="hljs-number">1</span>];
            b = <span class="hljs-title function_">interpolate</span>(sx, u, v);

            <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * (<span class="hljs-number">1</span> + <span class="hljs-title function_">interpolate</span>(sy, a, b));
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-51">&#x00a7;</a>
              </div>
              <p>A successor to Perlin noise generation, by the person who invented it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;simplex&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;simplex&#x27;</span>,

        <span class="hljs-attr">init</span>: λ<span class="hljs-literal">null</span>,

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> getCornerNoise = <span class="hljs-keyword">function</span> (<span class="hljs-params">cx, cy, gridPos</span>) {

                <span class="hljs-keyword">let</span> calc = <span class="hljs-number">0.5</span> - (cx * cx) - (cy * cy);
                <span class="hljs-keyword">if</span> (calc &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;

                <span class="hljs-keyword">let</span> [gx, gy] = perlinGrad[gridPos];
                <span class="hljs-keyword">return</span> calc * calc * ((gx * cx) + (gy * cy));
            };
            
            <span class="hljs-keyword">const</span> {simplexConstantF, simplexConstantG, simplexConstantDoubleG, size, perlinGrad, perm, permMod8} = <span class="hljs-variable language_">this</span>;
            
            <span class="hljs-keyword">let</span> summedCoordinates = (x + y) * simplexConstantF,
                summedX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x + summedCoordinates),
                summedY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y + summedCoordinates),
                modifiedSummedCoordinates = (summedX + summedY) * simplexConstantG;

            <span class="hljs-keyword">let</span> cornerX = x - (summedX - modifiedSummedCoordinates),
                cornerY = y - (summedY - modifiedSummedCoordinates);
            
            <span class="hljs-keyword">let</span> remainderX = summedX % size,
                remainderY = summedY % size;

            <span class="hljs-keyword">let</span> pos = permMod8[remainderX + perm[remainderY]],
                noise = <span class="hljs-title function_">getCornerNoise</span>(cornerX, cornerY, pos);

            pos = permMod8[remainderX + <span class="hljs-number">1</span> + perm[remainderY + <span class="hljs-number">1</span>]]
            noise += <span class="hljs-title function_">getCornerNoise</span>((cornerX - <span class="hljs-number">1</span> + simplexConstantDoubleG), (cornerY - <span class="hljs-number">1</span> + simplexConstantDoubleG), pos);

            <span class="hljs-keyword">let</span> unitA = <span class="hljs-number">0</span>,
                unitB = <span class="hljs-number">1</span>;

            <span class="hljs-keyword">if</span> (cornerX &gt; cornerY) {
                unitA = <span class="hljs-number">1</span>;
                unitB = <span class="hljs-number">0</span>;
            }

            pos = permMod8[remainderX + unitA + perm[remainderY + unitB]];
            noise += <span class="hljs-title function_">getCornerNoise</span>((cornerX - unitA + simplexConstantG), (cornerY - unitB + simplexConstantG), pos);

            <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> + (<span class="hljs-number">35</span> * noise);
        },
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-52">&#x00a7;</a>
              </div>
              <p>A simplified form of Perlin noise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;value&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;value&#x27;</span>,

        <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

            <span class="hljs-keyword">const</span> {values, size, rndEngine} = <span class="hljs-variable language_">this</span>;

            values.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {

                values[i] = values[i + size] = rndEngine.<span class="hljs-title function_">random</span>();
            }
        },

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {values, size, perm, smoothing} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">let</span> x0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x) % size,
                y0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y) % size,
                x1 = (x0 + <span class="hljs-number">1</span>) % size,
                y1 = (y0 + <span class="hljs-number">1</span>) % size,
                vx = x - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(x),
                vy = y - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(y),
                sx = <span class="hljs-title function_">smoothing</span>(vx),
                sy = <span class="hljs-title function_">smoothing</span>(vy),
                i = perm[x0],
                j = perm[x1],
                p00 = perm[i + y0],
                p10 = perm[j + y0],
                p01 = perm[i + y1],
                p11 = perm[j + y1],
                i1 = <span class="hljs-title function_">interpolate</span>(sx, values[p00], values[p10]),
                i2 = <span class="hljs-title function_">interpolate</span>(sx, values[p01], values[p11]);

            <span class="hljs-keyword">return</span> <span class="hljs-title function_">interpolate</span>(sy, i1, i2);
        },
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-53">&#x00a7;</a>
              </div>
              <p>For generating repeated stripe gradients, set the sum function to <code>modular</code> and vary the canvas width/height attributes to set the stripe direction; stripe spacing can be varied using the modular amplitude value. Other sum function values can also produce interesting effects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;stripes&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;stripes&#x27;</span>,

        <span class="hljs-attr">init</span>: λ<span class="hljs-literal">null</span>,

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">return</span> (x / <span class="hljs-number">5</span>) + (y / <span class="hljs-number">5</span>);
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-54">&#x00a7;</a>
              </div>
              <p>As for stripes, but can apply smoothing function to the output</p>
<ul>
<li>interesting things start to happen when scale is set to on/around 100 and canvas dimensions are roughly equal, alongside a higher value for sumAmplitude. Best viewed with a modular sum function</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;smoothed-stripes&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;smoothed-stripes&#x27;</span>,

        <span class="hljs-attr">init</span>: λ<span class="hljs-literal">null</span>,

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {smoothing} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">let</span> sx = <span class="hljs-title function_">smoothing</span>(x),
                sy = <span class="hljs-title function_">smoothing</span>(y);

            <span class="hljs-keyword">return</span> (sx / <span class="hljs-number">5</span>) + (sy / <span class="hljs-number">5</span>);
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-55">&#x00a7;</a>
              </div>
              <p>Worley functionality found in the <a href="https://github.com/jackunion/tooloud/blob/master/src/Worley.js">jackunion/tooloud GitHub repository</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;worley-euclidean&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;worley-euclidean&#x27;</span>,

        <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

            <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleySeed</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rndEngine</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000000</span>);
        },

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {width, height, worleyDepth, worleyDistanceFunctions, worleyOutputFunctions, worleyOutput} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">const</span> f = worleyDistanceFunctions[<span class="hljs-string">&#x27;euclidian-distance&#x27;</span>];
            <span class="hljs-keyword">const</span> o = worleyOutputFunctions[worleyOutput];

            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleyNoise</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, {<span class="hljs-attr">x</span>:x, <span class="hljs-attr">y</span>:y, <span class="hljs-attr">z</span>:worleyDepth}, f, o);
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-56">&#x00a7;</a>
              </div>
              <p>For generating repeated stripe gradients, set the sum function to <code>modular</code> and vary the canvas width/height attributes to set the stripe direction; stripe spacing can be varied using the modular amplitude value. Other sum function values can also produce interesting effects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;worley-manhattan&#x27;</span>: {

        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;worley-manhattan&#x27;</span>,

        <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

            <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleySeed</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rndEngine</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000000</span>);
        },

        <span class="hljs-attr">getNoiseValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) {

            <span class="hljs-keyword">const</span> {width, height, worleyDepth, worleyDistanceFunctions, worleyOutputFunctions, worleyOutput} = <span class="hljs-variable language_">this</span>;

            <span class="hljs-keyword">const</span> f = worleyDistanceFunctions[<span class="hljs-string">&#x27;manhattan-distance&#x27;</span>];
            <span class="hljs-keyword">const</span> o = worleyOutputFunctions[worleyOutput];

            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleyNoise</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, {<span class="hljs-attr">x</span>:x, <span class="hljs-attr">y</span>:y, <span class="hljs-attr">z</span>:worleyDepth}, f, o);
        }
    },
};</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-57">&#x00a7;</a>
              </div>
              <p><code>generatePermutationTable</code> - internal function called by the <code>cleanNoise</code> function</p>
<ul>
<li>The permutation tables get recalculated each time the noise data gets cleaned</li>
<li><code>rndEngine</code> is a seedable pseudo-random number generator</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">generatePermutationTable</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">const</span> {perm, permMod8, rndEngine, size} = <span class="hljs-variable language_">this</span>;

    perm.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
    permMod8.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">let</span> i, j, k;

    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; size; i++) {

        perm[i] = i;
    }
    
    <span class="hljs-keyword">while</span> (--i) {

        j = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(rndEngine.<span class="hljs-title function_">random</span>() * size);
        k = perm[i];
        perm[i] = perm[j];
        perm[j] = k;
    }
    
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; size; i++) {

        perm[i + size] = perm[i];
        permMod8[i] = permMod8[i + size] = perm[i] % <span class="hljs-number">8</span>;
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-58">&#x00a7;</a>
              </div>
              <p><code>octaveFunctions</code> - a {key:functions} object holding functions used to modify octave loop results</p>
<ul>
<li>calling signature: <code>octaveFunction(octave, scaledX, scaledY, o + 1)</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">octaveFunctions</span> = {

    <span class="hljs-attr">none</span>: λfirstArg,
    <span class="hljs-attr">absolute</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">octave</span>) { <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>((octave * <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>) },
};</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-59">&#x00a7;</a>
              </div>
              <p><code>sumFunctions</code> - a {key:functions} object holding functions used to modify noise values after their calculation has completed (post-processing)</p>
<ul>
<li>calling signature: <code>sumFunction.call(this, clampedVal, x * relativeScale, y * relativeScale)</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">sumFunctions</span> = {

    <span class="hljs-attr">none</span>: λfirstArg,</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-60">&#x00a7;</a>
              </div>
              <p>These functions modify the final output using a sine frequency calculation based on the pixel position within the canvas</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">&#x27;sine-x&#x27;</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">v, sx, sy</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((sx * <span class="hljs-variable language_">this</span>.<span class="hljs-property">sineFrequencyCoeff</span>) + v) / <span class="hljs-number">2</span>) },
    <span class="hljs-string">&#x27;sine-y&#x27;</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">v, sx, sy</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((sy * <span class="hljs-variable language_">this</span>.<span class="hljs-property">sineFrequencyCoeff</span>) + v) / <span class="hljs-number">2</span>) },
    <span class="hljs-attr">sine</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">v, sx, sy</span>) { <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((sx * <span class="hljs-variable language_">this</span>.<span class="hljs-property">sineFrequencyCoeff</span>) + v) / <span class="hljs-number">4</span>) + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((sy * <span class="hljs-variable language_">this</span>.<span class="hljs-property">sineFrequencyCoeff</span>) + v) / <span class="hljs-number">4</span>) },</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-61">&#x00a7;</a>
              </div>
              <p>This function creates repeating bands, the frequency of which depends on the sumAmplitude attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">modular</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
        <span class="hljs-keyword">let</span> g = v * <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumAmplitude</span>;
        <span class="hljs-keyword">return</span> g - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(g);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-62">&#x00a7;</a>
              </div>
              <p>This function adds random interference to the final output, the strength of which depends on the sumAmplitude attribute (lower values create a stronger effect)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">random</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
        <span class="hljs-keyword">let</span> a = <span class="hljs-variable language_">this</span>.<span class="hljs-property">sumAmplitude</span>;
        <span class="hljs-keyword">let</span> r = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() / a) - (<span class="hljs-number">0.5</span> / a);
        <span class="hljs-keyword">let</span> g = v + r;

        <span class="hljs-keyword">if</span> (g &gt; <span class="hljs-number">1</span>) g = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (g &lt; <span class="hljs-number">0</span>) g = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">return</span> g;
    },
};</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-63">&#x00a7;</a>
              </div>
              <p>Worley functionality found in the <a href="https://github.com/jackunion/tooloud/blob/master/src/Worley.js">jackunion/tooloud GitHub repository</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>P.<span class="hljs-property">wXorshift</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {

    <span class="hljs-keyword">let</span> x = value ^ (value &gt;&gt; <span class="hljs-number">12</span>);
    x = x ^ (x &lt;&lt; <span class="hljs-number">25</span>);
    x = x ^ (x &gt;&gt; <span class="hljs-number">27</span>);
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>;
};

P.<span class="hljs-property">wHash</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">i, j, k</span>) {

    <span class="hljs-keyword">return</span> (((((<span class="hljs-number">2166136261</span> ^ i) * <span class="hljs-number">16777619</span>) ^ j) * <span class="hljs-number">16777619</span>) ^ k) * <span class="hljs-number">16777619</span> &amp; <span class="hljs-number">0xffffffff</span>;
};

P.<span class="hljs-property">worleyDistanceFunctions</span> = {

    <span class="hljs-string">&#x27;euclidian-distance&#x27;</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">p1, p2</span>) {

        <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">function</span> (<span class="hljs-params">p1, p2</span>) {
            <span class="hljs-keyword">return</span> [p1.<span class="hljs-property">x</span> - p2.<span class="hljs-property">x</span>, p1.<span class="hljs-property">y</span> - p2.<span class="hljs-property">y</span>, p1.<span class="hljs-property">z</span> - p2.<span class="hljs-property">z</span>];
        };

        <span class="hljs-keyword">return</span> <span class="hljs-title function_">d</span>(p1, p2).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, x</span>) =&gt;</span> sum + (x * x), <span class="hljs-number">0</span>);
    },

    <span class="hljs-string">&#x27;manhattan-distance&#x27;</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">p1, p2</span>) {

        <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">function</span> (<span class="hljs-params">p1, p2</span>) {
            <span class="hljs-keyword">return</span> [p1.<span class="hljs-property">x</span> - p2.<span class="hljs-property">x</span>, p1.<span class="hljs-property">y</span> - p2.<span class="hljs-property">y</span>, p1.<span class="hljs-property">z</span> - p2.<span class="hljs-property">z</span>];
        };

        <span class="hljs-keyword">return</span> <span class="hljs-title function_">d</span>(p1, p2).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, x</span>) =&gt;</span> sum + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(x), <span class="hljs-number">0</span>);
    },
};

P.<span class="hljs-property">wProbLookup</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {

    value = value &amp; <span class="hljs-number">0xffffffff</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">393325350</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">1022645910</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">1861739990</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">2700834071</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">3372109335</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">3819626178</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">6</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">4075350088</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">7</span>;
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">4203212043</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">8</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">9</span>;
};

P.<span class="hljs-property">wInsert</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">arr, value</span>) {

    <span class="hljs-keyword">let</span> temp;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {

        <span class="hljs-keyword">if</span> (value &gt; arr[i]) <span class="hljs-keyword">break</span>;

        temp = arr[i];
        arr[i] = value;
        <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &lt; arr.<span class="hljs-property">length</span>) arr[i + <span class="hljs-number">1</span>] = temp;
    }
};

P.<span class="hljs-property">worleyOutputFunctions</span> = {

    <span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">Xminus</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] - arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">Xminus</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] - arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">Yminus</span><span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>] - arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-title class_">Yminus</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>] - arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">Zminus</span><span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">2</span>] - arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-title class_">Zminus</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">2</span>] - arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">Xadd</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">Xadd</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">Yadd</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>] + arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">XaddYminus</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">1</span>] - arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">XaddZminus</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">2</span>] - arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">YaddZminus</span><span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>] + arr[<span class="hljs-number">2</span>] - arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-title class_">Xmultiply</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">Xmultiply</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">Ymultiply</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>] * arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">XmultiplyYadd</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">1</span>]) + arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">XmultiplyZadd</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">2</span>]) + arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">YmultiplyZadd</span><span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">1</span>] * arr[<span class="hljs-number">2</span>]) + arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-title class_">XmultiplyYminus</span><span class="hljs-attr">Z</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">1</span>]) - arr[<span class="hljs-number">2</span>];
    },

    <span class="hljs-title class_">XmultiplyZminus</span><span class="hljs-attr">Y</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">0</span>] * arr[<span class="hljs-number">2</span>]) - arr[<span class="hljs-number">1</span>];
    },

    <span class="hljs-title class_">YmultiplyZminus</span><span class="hljs-attr">X</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> (arr[<span class="hljs-number">1</span>] * arr[<span class="hljs-number">2</span>]) - arr[<span class="hljs-number">0</span>];
    },

    <span class="hljs-attr">sum</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) {
        <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>] + arr[<span class="hljs-number">1</span>] + arr[<span class="hljs-number">2</span>];
    },
}

P.<span class="hljs-property">worleyNoise</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, distanceFunc, outputFunc</span>) {

    <span class="hljs-keyword">let</span> lastRandom,
        numberFeaturePoints,
        randomDiff = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> },
        featurePoint = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> };

    <span class="hljs-keyword">let</span> cubeX, cubeY, cubeZ;

    <span class="hljs-keyword">let</span> distanceArray = [<span class="hljs-number">9999999</span>, <span class="hljs-number">9999999</span>, <span class="hljs-number">9999999</span>];

    <span class="hljs-keyword">let</span> {<span class="hljs-attr">x</span>:inputX, <span class="hljs-attr">y</span>:inputY, <span class="hljs-attr">z</span>:inputZ} = input;
    inputX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(inputX);
    inputY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(inputY);
    inputZ = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(inputZ);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = -<span class="hljs-number">1</span>; i &lt; <span class="hljs-number">2</span>; ++i) {

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = -<span class="hljs-number">1</span>; j &lt; <span class="hljs-number">2</span>; ++j) {

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = -<span class="hljs-number">1</span>; k &lt; <span class="hljs-number">2</span>; ++k) {

                cubeX = inputX + i;
                cubeY = inputY + j;
                cubeZ = inputZ + k;

                lastRandom = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wXorshift</span>(
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wHash</span>(
                        (cubeX + <span class="hljs-variable language_">this</span>.<span class="hljs-property">worleySeed</span>) &amp; <span class="hljs-number">0xffffffff</span>,
                        (cubeY) &amp; <span class="hljs-number">0xffffffff</span>,
                        (cubeZ) &amp; <span class="hljs-number">0xffffffff</span>
                    )
                );

                numberFeaturePoints = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wProbLookup</span>(lastRandom);

                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> l = <span class="hljs-number">0</span>; l &lt; numberFeaturePoints; ++l) {

                    lastRandom = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wXorshift</span>(lastRandom);
                    randomDiff.<span class="hljs-property">X</span> = lastRandom / <span class="hljs-number">0x100000000</span>;

                    lastRandom = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wXorshift</span>(lastRandom);
                    randomDiff.<span class="hljs-property">Y</span> = lastRandom / <span class="hljs-number">0x100000000</span>;

                    lastRandom = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wXorshift</span>(lastRandom);
                    randomDiff.<span class="hljs-property">Z</span> = lastRandom / <span class="hljs-number">0x100000000</span>;

                    featurePoint = {
                        <span class="hljs-attr">x</span>: randomDiff.<span class="hljs-property">X</span> + cubeX,
                        <span class="hljs-attr">y</span>: randomDiff.<span class="hljs-property">Y</span> + cubeY,
                        <span class="hljs-attr">z</span>: randomDiff.<span class="hljs-property">Z</span> + cubeZ
                    };

                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">wInsert</span>(distanceArray, <span class="hljs-title function_">distanceFunc</span>(input, featurePoint));
                }
            }
        }
    }
    <span class="hljs-keyword">const</span> preFinal = distanceArray.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : x &gt; <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : x );
    <span class="hljs-keyword">const</span> final = <span class="hljs-title function_">outputFunc</span>(preFinal);

    <span class="hljs-keyword">return</span> final;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-64">&#x00a7;</a>
              </div>
              <h4 id="factory">Factory</h4>
<pre><code>scrawl.<span class="hljs-title function_">makeNoiseAsset</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-noise-generator&#x27;</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">octaves</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">noiseEngine</span>: <span class="hljs-string">&#x27;simplex&#x27;</span>,
});
</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> makeNoiseAsset = <span class="hljs-keyword">function</span> (<span class="hljs-params">items</span>) {

    <span class="hljs-keyword">if</span> (!items) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoiseAsset</span>(items);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-65">&#x00a7;</a>
              </div>
              <p>Deprecated - old name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> makeNoise = makeNoiseAsset;

constructors.<span class="hljs-property">NoiseAsset</span> = <span class="hljs-title class_">NoiseAsset</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-66">&#x00a7;</a>
              </div>
              <h4 id="exports">Exports</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">export</span> {
    makeNoiseAsset,
    makeNoise,
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
