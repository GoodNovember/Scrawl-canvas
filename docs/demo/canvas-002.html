<!DOCTYPE html>

<html>
<head>
  <title>Demo Canvas 002</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="canvas-001.html">
                  ./demo/canvas-001.js
                </a>
              
                
                <a class="source" href="canvas-002.html">
                  ./demo/canvas-002.js
                </a>
              
                
                <a class="source" href="canvas-003.html">
                  ./demo/canvas-003.js
                </a>
              
                
                <a class="source" href="canvas-004.html">
                  ./demo/canvas-004.js
                </a>
              
                
                <a class="source" href="canvas-005.html">
                  ./demo/canvas-005.js
                </a>
              
                
                <a class="source" href="canvas-006.html">
                  ./demo/canvas-006.js
                </a>
              
                
                <a class="source" href="canvas-007.html">
                  ./demo/canvas-007.js
                </a>
              
                
                <a class="source" href="canvas-008.html">
                  ./demo/canvas-008.js
                </a>
              
                
                <a class="source" href="canvas-009.html">
                  ./demo/canvas-009.js
                </a>
              
                
                <a class="source" href="canvas-010.html">
                  ./demo/canvas-010.js
                </a>
              
                
                <a class="source" href="canvas-011.html">
                  ./demo/canvas-011.js
                </a>
              
                
                <a class="source" href="canvas-012.html">
                  ./demo/canvas-012.js
                </a>
              
                
                <a class="source" href="canvas-013.html">
                  ./demo/canvas-013.js
                </a>
              
                
                <a class="source" href="canvas-014.html">
                  ./demo/canvas-014.js
                </a>
              
                
                <a class="source" href="canvas-015.html">
                  ./demo/canvas-015.js
                </a>
              
                
                <a class="source" href="canvas-016.html">
                  ./demo/canvas-016.js
                </a>
              
                
                <a class="source" href="canvas-017.html">
                  ./demo/canvas-017.js
                </a>
              
                
                <a class="source" href="canvas-018.html">
                  ./demo/canvas-018.js
                </a>
              
                
                <a class="source" href="canvas-019.html">
                  ./demo/canvas-019.js
                </a>
              
                
                <a class="source" href="canvas-020.html">
                  ./demo/canvas-020.js
                </a>
              
                
                <a class="source" href="canvas-021.html">
                  ./demo/canvas-021.js
                </a>
              
                
                <a class="source" href="canvas-022.html">
                  ./demo/canvas-022.js
                </a>
              
                
                <a class="source" href="canvas-023.html">
                  ./demo/canvas-023.js
                </a>
              
                
                <a class="source" href="canvas-024.html">
                  ./demo/canvas-024.js
                </a>
              
                
                <a class="source" href="canvas-025.html">
                  ./demo/canvas-025.js
                </a>
              
                
                <a class="source" href="canvas-026.html">
                  ./demo/canvas-026.js
                </a>
              
                
                <a class="source" href="canvas-027.html">
                  ./demo/canvas-027.js
                </a>
              
                
                <a class="source" href="canvas-028.html">
                  ./demo/canvas-028.js
                </a>
              
                
                <a class="source" href="canvas-029.html">
                  ./demo/canvas-029.js
                </a>
              
                
                <a class="source" href="canvas-030.html">
                  ./demo/canvas-030.js
                </a>
              
                
                <a class="source" href="canvas-031.html">
                  ./demo/canvas-031.js
                </a>
              
                
                <a class="source" href="canvas-032.html">
                  ./demo/canvas-032.js
                </a>
              
                
                <a class="source" href="canvas-033.html">
                  ./demo/canvas-033.js
                </a>
              
                
                <a class="source" href="canvas-034.html">
                  ./demo/canvas-034.js
                </a>
              
                
                <a class="source" href="canvas-035.html">
                  ./demo/canvas-035.js
                </a>
              
                
                <a class="source" href="canvas-036.html">
                  ./demo/canvas-036.js
                </a>
              
                
                <a class="source" href="canvas-037.html">
                  ./demo/canvas-037.js
                </a>
              
                
                <a class="source" href="canvas-038.html">
                  ./demo/canvas-038.js
                </a>
              
                
                <a class="source" href="canvas-039.html">
                  ./demo/canvas-039.js
                </a>
              
                
                <a class="source" href="canvas-040.html">
                  ./demo/canvas-040.js
                </a>
              
                
                <a class="source" href="canvas-041.html">
                  ./demo/canvas-041.js
                </a>
              
                
                <a class="source" href="canvas-042.html">
                  ./demo/canvas-042.js
                </a>
              
                
                <a class="source" href="component-001.html">
                  ./demo/component-001.js
                </a>
              
                
                <a class="source" href="component-002.html">
                  ./demo/component-002.js
                </a>
              
                
                <a class="source" href="component-003.html">
                  ./demo/component-003.js
                </a>
              
                
                <a class="source" href="component-004.html">
                  ./demo/component-004.js
                </a>
              
                
                <a class="source" href="component-005.html">
                  ./demo/component-005.js
                </a>
              
                
                <a class="source" href="core-001.html">
                  ./demo/core-001.js
                </a>
              
                
                <a class="source" href="dom-001.html">
                  ./demo/dom-001.js
                </a>
              
                
                <a class="source" href="dom-002.html">
                  ./demo/dom-002.js
                </a>
              
                
                <a class="source" href="dom-003.html">
                  ./demo/dom-003.js
                </a>
              
                
                <a class="source" href="dom-004.html">
                  ./demo/dom-004.js
                </a>
              
                
                <a class="source" href="dom-005.html">
                  ./demo/dom-005.js
                </a>
              
                
                <a class="source" href="dom-006.html">
                  ./demo/dom-006.js
                </a>
              
                
                <a class="source" href="dom-007.html">
                  ./demo/dom-007.js
                </a>
              
                
                <a class="source" href="dom-008.html">
                  ./demo/dom-008.js
                </a>
              
                
                <a class="source" href="dom-009.html">
                  ./demo/dom-009.js
                </a>
              
                
                <a class="source" href="dom-010.html">
                  ./demo/dom-010.js
                </a>
              
                
                <a class="source" href="dom-011.html">
                  ./demo/dom-011.js
                </a>
              
                
                <a class="source" href="dom-012.html">
                  ./demo/dom-012.js
                </a>
              
                
                <a class="source" href="dom-013.html">
                  ./demo/dom-013.js
                </a>
              
                
                <a class="source" href="dom-014a.html">
                  ./demo/dom-014a.js
                </a>
              
                
                <a class="source" href="dom-014b.html">
                  ./demo/dom-014b.js
                </a>
              
                
                <a class="source" href="dom-014c.html">
                  ./demo/dom-014c.js
                </a>
              
                
                <a class="source" href="dom-015.html">
                  ./demo/dom-015.js
                </a>
              
                
                <a class="source" href="dom-016.html">
                  ./demo/dom-016.js
                </a>
              
                
                <a class="source" href="filters-001.html">
                  ./demo/filters-001.js
                </a>
              
                
                <a class="source" href="filters-002.html">
                  ./demo/filters-002.js
                </a>
              
                
                <a class="source" href="filters-003.html">
                  ./demo/filters-003.js
                </a>
              
                
                <a class="source" href="filters-004.html">
                  ./demo/filters-004.js
                </a>
              
                
                <a class="source" href="filters-005.html">
                  ./demo/filters-005.js
                </a>
              
                
                <a class="source" href="filters-006.html">
                  ./demo/filters-006.js
                </a>
              
                
                <a class="source" href="filters-007.html">
                  ./demo/filters-007.js
                </a>
              
                
                <a class="source" href="filters-008.html">
                  ./demo/filters-008.js
                </a>
              
                
                <a class="source" href="filters-009.html">
                  ./demo/filters-009.js
                </a>
              
                
                <a class="source" href="filters-010.html">
                  ./demo/filters-010.js
                </a>
              
                
                <a class="source" href="filters-011.html">
                  ./demo/filters-011.js
                </a>
              
                
                <a class="source" href="filters-012.html">
                  ./demo/filters-012.js
                </a>
              
                
                <a class="source" href="filters-013.html">
                  ./demo/filters-013.js
                </a>
              
                
                <a class="source" href="filters-014.html">
                  ./demo/filters-014.js
                </a>
              
                
                <a class="source" href="filters-015.html">
                  ./demo/filters-015.js
                </a>
              
                
                <a class="source" href="particles-001.html">
                  ./demo/particles-001.js
                </a>
              
                
                <a class="source" href="particles-002.html">
                  ./demo/particles-002.js
                </a>
              
                
                <a class="source" href="particles-003.html">
                  ./demo/particles-003.js
                </a>
              
                
                <a class="source" href="particles-004.html">
                  ./demo/particles-004.js
                </a>
              
                
                <a class="source" href="particles-005.html">
                  ./demo/particles-005.js
                </a>
              
                
                <a class="source" href="particles-006.html">
                  ./demo/particles-006.js
                </a>
              
                
                <a class="source" href="particles-007.html">
                  ./demo/particles-007.js
                </a>
              
                
                <a class="source" href="particles-008.html">
                  ./demo/particles-008.js
                </a>
              
                
                <a class="source" href="particles-009.html">
                  ./demo/particles-009.js
                </a>
              
                
                <a class="source" href="particles-010.html">
                  ./demo/particles-010.js
                </a>
              
                
                <a class="source" href="particles-011.html">
                  ./demo/particles-011.js
                </a>
              
                
                <a class="source" href="particles-012.html">
                  ./demo/particles-012.js
                </a>
              
                
                <a class="source" href="particles-013.html">
                  ./demo/particles-013.js
                </a>
              
                
                <a class="source" href="particles-014.html">
                  ./demo/particles-014.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="demo-canvas-002">Demo Canvas 002</h1>
<p>Block and wheel entity positioning (start, pivot, mimic, mouse)</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p><a href="../../demo/canvas-002.html">Run code</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> scrawl <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../source/scrawl.js&#x27;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h4 id="scene-setup">Scene setup</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> canvas = scrawl.library.artefact.mycanvas;

canvas.setBase({
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;aliceblue&#x27;</span>,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Create and clone block and wheel entitys. For the sake of safety and sanity, create the (reference) entitys on which other artefacts will pivot and mimic first. Then create those other artefacts.</p>
<p>Note: setting this entity’s <code>method</code> value to <strong>none</strong> means that while it will perform all necessary calculations as part of the Display cycle, it will not complete its stamp action, thus will not appear on the display. This differs from setting its <code>visibility</code> attribute to false, which will make the entity skip both calculation and stamp operations</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> myPivot = scrawl.makeWheel({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mouse-pivot&#x27;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;none&#x27;</span>,

    <span class="hljs-attr">startX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">startY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
});

<span class="hljs-keyword">let</span> myblock = scrawl.makeBlock({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;base-block&#x27;</span>,

    <span class="hljs-attr">width</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">offsetX</span>: -<span class="hljs-number">140</span>,
    <span class="hljs-attr">offsetY</span>: -<span class="hljs-number">50</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>To pivot this entity to the reference entity, we need to set both its <code>pivot</code> attribute (to the reference entity’s name, or the entity itself) <strong>and also</strong> set the <code>lockTo</code> attribute to the value <strong>‘pivot’</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    pivot: <span class="hljs-string">&#x27;mouse-pivot&#x27;</span>,
    <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;pivot&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-string">&#x27;darkblue&#x27;</span>,
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">&#x27;gold&#x27;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;fillAndDraw&#x27;</span>,

    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">lineJoin</span>: <span class="hljs-string">&#x27;round&#x27;</span>,

    <span class="hljs-attr">delta</span>: {
        <span class="hljs-attr">roll</span>: <span class="hljs-number">0.5</span>,
    },
});

<span class="hljs-keyword">let</span> mywheel = scrawl.makeWheel({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;base-wheel&#x27;</span>,

    <span class="hljs-attr">radius</span>: <span class="hljs-number">60</span>,
    <span class="hljs-attr">startAngle</span>: <span class="hljs-number">35</span>,
    <span class="hljs-attr">endAngle</span>: -<span class="hljs-number">35</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">140</span>,
    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">50</span>,

    <span class="hljs-attr">pivot</span>: <span class="hljs-string">&#x27;mouse-pivot&#x27;</span>,
    <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;pivot&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-string">&#x27;purple&#x27;</span>,
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">&#x27;gold&#x27;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;fillAndDraw&#x27;</span>,

    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">lineJoin</span>: <span class="hljs-string">&#x27;round&#x27;</span>,

    <span class="hljs-attr">delta</span>: {
        <span class="hljs-attr">roll</span>: -<span class="hljs-number">0.5</span>,
    },
});

myblock.clone({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;pivot-block&#x27;</span>,

    <span class="hljs-attr">height</span>: <span class="hljs-number">30</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">&#x27;red&#x27;</span>,
    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;draw&#x27;</span>,

    <span class="hljs-attr">pivot</span>: <span class="hljs-string">&#x27;base-block&#x27;</span>,
    <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;pivot&#x27;</span>,

    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">110</span>,
    <span class="hljs-attr">addPivotOffset</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-attr">delta</span>: {
        <span class="hljs-attr">roll</span>: <span class="hljs-number">0</span>,
    },

}).clone({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;pivot-wheel&#x27;</span>,

    <span class="hljs-attr">pivot</span>: <span class="hljs-string">&#x27;base-wheel&#x27;</span>,
    <span class="hljs-attr">addPivotRotation</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;50%&#x27;</span>,

    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span>,

}).clone({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mimic-wheel&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><code>mimic</code> is an extended form of <code>pivot</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mimic: <span class="hljs-string">&#x27;base-wheel&#x27;</span>,
    <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;mimic&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>When an entity mimics another entity’s dimensions, its own dimensions (width, height) can be added to the mimic dimensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    width: <span class="hljs-number">20</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">20</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Handles can be directly affected by mimic dimensions. If the entity adds its own dimensions to the mimics dimensions, then it may also need to add appropriate handle values to the mimic’s handle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    handleX: <span class="hljs-number">10</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-number">10</span>,

    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">&#x27;darkgreen&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>The default values for the <strong>useMimic</strong> and <strong>addOwn</strong> variables is ‘false’ - including false attributes here only for convenience during development work</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    useMimicDimensions: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicScale</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicStart</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicHandle</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicRotation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicFlip</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-attr">addOwnDimensionsToMimic</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">addOwnScaleToMimic</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addOwnStartToMimic</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addOwnHandleToMimic</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">addOwnOffsetToMimic</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">addOwnRotationToMimic</span>: <span class="hljs-literal">false</span>,
});

mywheel.clone({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mimic-block&#x27;</span>,

    <span class="hljs-attr">mimic</span>: <span class="hljs-string">&#x27;base-block&#x27;</span>,
    <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;mimic&#x27;</span>,

    <span class="hljs-attr">width</span>: <span class="hljs-number">60</span>,

    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-string">&#x27;darkgreen&#x27;</span>,
    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;draw&#x27;</span>,

    <span class="hljs-attr">useMimicDimensions</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicScale</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicStart</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicOffset</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useMimicRotation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">addOwnDimensionsToMimic</span>: <span class="hljs-literal">true</span>,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h4 id="user-interaction">User interaction</h4>
<p>Function to check whether mouse cursor is over canvas, and lock the reference entity accordingly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> mouseCheck = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> active = <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">if</span> (canvas.here.active !== active) {

            active = canvas.here.active;

            myPivot.set({
                <span class="hljs-attr">lockTo</span>: (active) ? <span class="hljs-string">&#x27;mouse&#x27;</span> : <span class="hljs-string">&#x27;start&#x27;</span>
            });
        }
    };
}();</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h4 id="scene-animation">Scene animation</h4>
<p>Function to display frames-per-second data, and other information relevant to the demo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> report = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">let</span> testTicker = <span class="hljs-built_in">Date</span>.now(),
        testTime, testNow,
        testMessage = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;#reportmessage&#x27;</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        testNow = <span class="hljs-built_in">Date</span>.now();
        testTime = testNow - testTicker;
        testTicker = testNow;

        testMessage.textContent = <span class="hljs-string">`Screen refresh: <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.ceil(testTime)}</span>ms; fps: <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">1000</span> / testTime)}</span>`</span>;
    };
}();</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Create the Display cycle animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scrawl.makeRender({

    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;demo-animation&#x27;</span>,
    <span class="hljs-attr">target</span>: canvas,
    <span class="hljs-attr">commence</span>: mouseCheck,
    <span class="hljs-attr">afterShow</span>: report,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h4 id="development-and-testing">Development and testing</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">console</span>.log(scrawl.library);</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>To test kill functionality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> killArtefact = <span class="hljs-function">(<span class="hljs-params">name, time, finishResurrection</span>) =&gt;</span> {

    <span class="hljs-keyword">let</span> groupname = <span class="hljs-string">&#x27;mycanvas_base&#x27;</span>,
        packet;

    <span class="hljs-keyword">let</span> checkGroupBucket = <span class="hljs-function">(<span class="hljs-params">name, groupname</span>) =&gt;</span> {

        <span class="hljs-keyword">let</span> res = scrawl.library.group[groupname].artefactBuckets.filter(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.name === name );
        <span class="hljs-keyword">return</span> (res.length) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>;
    };

    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${name}</span> alive
    removed from artefact: <span class="hljs-subst">${(scrawl.library.artefact[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from artefactnames: <span class="hljs-subst">${(scrawl.library.artefactnames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entity: <span class="hljs-subst">${(scrawl.library.entity[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entitynames: <span class="hljs-subst">${(scrawl.library.entitynames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefacts: <span class="hljs-subst">${(scrawl.library.group[groupname].artefacts.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefactBuckets: <span class="hljs-subst">${checkGroupBucket(name, groupname)}</span>`</span>);

        packet = scrawl.library.artefact[name].saveAsPacket();

        scrawl.library.artefact[name].kill();

        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${name}</span> killed
    removed from artefact: <span class="hljs-subst">${(scrawl.library.artefact[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from artefactnames: <span class="hljs-subst">${(scrawl.library.artefactnames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entity: <span class="hljs-subst">${(scrawl.library.entity[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entitynames: <span class="hljs-subst">${(scrawl.library.entitynames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefacts: <span class="hljs-subst">${(scrawl.library.group[groupname].artefacts.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefactBuckets: <span class="hljs-subst">${checkGroupBucket(name, groupname)}</span>`</span>);

            canvas.actionPacket(packet);

            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${name}</span> resurrected
    removed from artefact: <span class="hljs-subst">${(scrawl.library.artefact[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from artefactnames: <span class="hljs-subst">${(scrawl.library.artefactnames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entity: <span class="hljs-subst">${(scrawl.library.entity[name]) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from entitynames: <span class="hljs-subst">${(scrawl.library.entitynames.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefacts: <span class="hljs-subst">${(scrawl.library.group[groupname].artefacts.indexOf(name) &gt;= <span class="hljs-number">0</span>) ? <span class="hljs-string">&#x27;no&#x27;</span> : <span class="hljs-string">&#x27;yes&#x27;</span>}</span>
    removed from group.artefactBuckets: <span class="hljs-subst">${checkGroupBucket(name, groupname)}</span>`</span>);

                finishResurrection();

            }, <span class="hljs-number">100</span>);
        }, <span class="hljs-number">100</span>);
    }, time);
};

killArtefact(<span class="hljs-string">&#x27;mouse-pivot&#x27;</span>, <span class="hljs-number">4000</span>, <span class="hljs-function">() =&gt;</span> {

    myPivot = scrawl.library.entity[<span class="hljs-string">&#x27;mouse-pivot&#x27;</span>];

    scrawl.library.entity[<span class="hljs-string">&#x27;base-block&#x27;</span>].set({

        <span class="hljs-attr">pivot</span>: myPivot,
        <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;pivot&#x27;</span>,
    });

    scrawl.library.entity[<span class="hljs-string">&#x27;base-wheel&#x27;</span>].set({

        <span class="hljs-attr">pivot</span>: myPivot,
        <span class="hljs-attr">lockTo</span>: <span class="hljs-string">&#x27;pivot&#x27;</span>,
    });
});

killArtefact(<span class="hljs-string">&#x27;mimic-block&#x27;</span>, <span class="hljs-number">6000</span>, <span class="hljs-function">() =&gt;</span> {});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
